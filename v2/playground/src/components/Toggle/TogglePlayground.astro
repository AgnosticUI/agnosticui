---
import ReactToggleDemo from "../ReactToggleDemo.tsx";
import VueToggleDemo from "../VueToggleDemo.vue";
import SvelteToggleDemo from "../SvelteToggleDemo.svelte";
import { Home, ToggleLeft, ToggleRight } from "lucide-astro";
---

<script>
  // Import web components
  import 'agnosticui-core';

  // Initialize components and syntax highlighting
  document.addEventListener("DOMContentLoaded", async () => {
    try {
      // Wait for ag-toggle and ag-tabs to be defined
      await customElements.whenDefined("ag-toggle");
      await customElements.whenDefined("ag-tabs");
      await customElements.whenDefined("ag-tab");
      await customElements.whenDefined("ag-tab-panel");

      // Initialize syntax highlighting if available
      if (typeof window.initSyntaxHighlighting === 'function') {
        window.initSyntaxHighlighting();
      }
    } catch (error) {
      console.error("Error loading toggle components:", error);
    }
  });
</script>

<style is:global>
  /* Reset default body styles to use our container approach */
  body {
    margin: 0;
    padding: 0;
    background: var(--c-bg-secondary);
  }

  /* Navigation Breadcrumb */
  .nav-breadcrumb {
    margin-bottom: 1rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--c-border);
  }

  .nav-home {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--c-text-light);
    font-size: 0.9rem;
    text-decoration: none;
    transition: color 0.2s ease;
  }

  .nav-home:hover {
    color: var(--ag-primary);
  }

  .nav-home svg {
    width: 1.25rem;
    height: 1.25rem;
  }

  /* Basic styling for better visibility */
  h1, h2, h3 {
    margin: 1rem 0;
  }

  section {
    margin: 2rem 0;
    text-align: left;
  }

  /* Component showcase styling */
  .component-showcase {
    margin: 1.5rem 0;
  }

  .preview-container {
    padding: 1.5rem;
    background: var(--c-card-bg);
    border: 1px solid var(--c-border);
    border-radius: 8px;
  }

  .code-container {
    background: var(--c-bg-secondary);
    border-radius: 8px;
    overflow: hidden;
  }

  .code-container pre {
    margin: 0;
    padding: 1.5rem;
    background: transparent;
    overflow-x: auto;
  }

  .code-container code {
    font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
    font-size: 0.875rem;
    line-height: 1.5;
  }

  /* Toggle component playground styling */
  ag-toggle {
    margin: 1rem 0;
    display: block;
  }

  /* Toggle label styling */
  ag-toggle::part(label) {
    font-weight: 600;
    color: var(--c-text);
    font-size: 1rem;
    margin-left: 0.75rem;
  }

  /* Toggle track styling */
  ag-toggle::part(track) {
    width: 2.75rem;
    height: 1.5rem;
    background: var(--c-border);
    border-radius: 0.75rem;
    position: relative;
    display: inline-block;
    transition: background-color 0.2s ease;
    cursor: pointer;
  }

  ag-toggle[checked]::part(track) {
    background: var(--ag-primary);
  }

  /* Toggle thumb styling */
  ag-toggle::part(thumb) {
    width: 1.25rem;
    height: 1.25rem;
    background: white;
    border-radius: 50%;
    position: absolute;
    top: 0.125rem;
    left: 0.125rem;
    transition: transform 0.2s ease;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
  }

  ag-toggle[checked]::part(thumb) {
    transform: translateX(1.25rem);
  }

  /* Disabled state */
  ag-toggle[disabled]::part(track) {
    background: var(--c-border-light);
    cursor: not-allowed;
    opacity: 0.6;
  }

  /* Focus styles */
  ag-toggle::part(input):focus-visible + ag-toggle::part(track) {
    outline: 2px solid var(--ag-focus);
    outline-offset: 2px;
  }

  /* Demo container styles */
  .demo-container {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    padding: 1rem;
    background: var(--c-card-bg);
    border-radius: 8px;
    border: 1px solid var(--c-border);
  }

  .demo-row {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 0.5rem 0;
  }

  .demo-section {
    margin: 2rem 0;
  }

  .size-demo {
    display: flex;
    gap: 2rem;
    align-items: center;
    flex-wrap: wrap;
  }

  .size-demo > div {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  /* Size variant styling */
  ag-toggle[size="sm"]::part(track) {
    width: 2rem;
    height: 1.125rem;
  }

  ag-toggle[size="sm"]::part(thumb) {
    width: 0.875rem;
    height: 0.875rem;
    top: 0.125rem;
    left: 0.125rem;
  }

  ag-toggle[size="sm"][checked]::part(thumb) {
    transform: translateX(0.875rem);
  }

  ag-toggle[size="lg"]::part(track) {
    width: 3.5rem;
    height: 2rem;
  }

  ag-toggle[size="lg"]::part(thumb) {
    width: 1.75rem;
    height: 1.75rem;
    top: 0.125rem;
    left: 0.125rem;
  }

  ag-toggle[size="lg"][checked]::part(thumb) {
    transform: translateX(1.75rem);
  }

  /* Variant styling */
  ag-toggle[variant="success"]::part(track) {
    background: var(--c-border);
  }

  ag-toggle[variant="success"][checked]::part(track) {
    background: var(--ag-success, #22c55e);
  }

  ag-toggle[variant="warning"]::part(track) {
    background: var(--c-border);
  }

  ag-toggle[variant="warning"][checked]::part(track) {
    background: var(--ag-warning, #f59e0b);
  }

  ag-toggle[variant="danger"]::part(track) {
    background: var(--c-border);
  }

  ag-toggle[variant="danger"][checked]::part(track) {
    background: var(--ag-danger, #ef4444);
  }
</style>

<div>
  <div class="nav-breadcrumb">
    <a href="/" class="nav-home">
      <Home />
      Back to Components
    </a>
  </div>

  <h1><ToggleLeft /> Toggle Component</h1>
  <p>Interactive toggle switch for binary state changes with accessibility support.</p>

  <section>
    <h2>Basic Toggle</h2>
    <p>Simple on/off toggle switch:</p>

    <div class="component-showcase">
      <ag-tabs activation="manual" active-tab="0" aria-label="Basic toggle example">
        <ag-tab slot="tab" panel="basic-preview-panel">Preview</ag-tab>
        <ag-tab slot="tab" panel="basic-code-panel">Code</ag-tab>

        <ag-tab-panel slot="panel" id="basic-preview-panel">
          <div class="preview-container">
            <div class="demo-container">
              <div class="demo-row">
                <ag-toggle label="Enable notifications"></ag-toggle>
              </div>
              <div class="demo-row">
                <ag-toggle checked label="Dark mode enabled"></ag-toggle>
              </div>
              <div class="demo-row">
                <ag-toggle disabled label="Premium feature (disabled)"></ag-toggle>
              </div>
            </div>
          </div>
        </ag-tab-panel>

        <ag-tab-panel slot="panel" id="basic-code-panel">
          <div class="code-container">
            <pre><code class="language-html">{`<ag-toggle label="Enable notifications"></ag-toggle>
<ag-toggle checked label="Dark mode enabled"></ag-toggle>
<ag-toggle disabled label="Premium feature (disabled)"></ag-toggle>`}</code></pre>
          </div>
        </ag-tab-panel>
      </ag-tabs>
    </div>
  </section>

  <section>
    <h2>Size Variants</h2>
    <p>Toggle switches in different sizes:</p>

    <div class="component-showcase">
      <ag-tabs activation="manual" active-tab="0" aria-label="Size variants example">
        <ag-tab slot="tab" panel="sizes-preview-panel">Preview</ag-tab>
        <ag-tab slot="tab" panel="sizes-code-panel">Code</ag-tab>

        <ag-tab-panel slot="panel" id="sizes-preview-panel">
          <div class="preview-container">
            <div class="demo-container">
              <div class="size-demo">
                <div>
                  <ag-toggle size="sm" label="Small"></ag-toggle>
                </div>
                <div>
                  <ag-toggle size="md" label="Medium (default)"></ag-toggle>
                </div>
                <div>
                  <ag-toggle size="lg" label="Large"></ag-toggle>
                </div>
              </div>
            </div>
          </div>
        </ag-tab-panel>

        <ag-tab-panel slot="panel" id="sizes-code-panel">
          <div class="code-container">
            <pre><code class="language-html">{`<ag-toggle size="sm" label="Small"></ag-toggle>
<ag-toggle size="md" label="Medium (default)"></ag-toggle>
<ag-toggle size="lg" label="Large"></ag-toggle>`}</code></pre>
          </div>
        </ag-tab-panel>
      </ag-tabs>
    </div>
  </section>

  <section>
    <h2>Visual Variants</h2>
    <p>Toggle switches with semantic colors:</p>

    <div class="component-showcase">
      <ag-tabs activation="manual" active-tab="0" aria-label="Visual variants example">
        <ag-tab slot="tab" panel="variants-preview-panel">Preview</ag-tab>
        <ag-tab slot="tab" panel="variants-code-panel">Code</ag-tab>

        <ag-tab-panel slot="panel" id="variants-preview-panel">
          <div class="preview-container">
            <div class="demo-container">
              <div class="demo-row">
                <ag-toggle variant="default" checked label="Default (Primary)"></ag-toggle>
              </div>
              <div class="demo-row">
                <ag-toggle variant="success" checked label="Success (Green)"></ag-toggle>
              </div>
              <div class="demo-row">
                <ag-toggle variant="warning" checked label="Warning (Yellow)"></ag-toggle>
              </div>
              <div class="demo-row">
                <ag-toggle variant="danger" checked label="Danger (Red)"></ag-toggle>
              </div>
            </div>
          </div>
        </ag-tab-panel>

        <ag-tab-panel slot="panel" id="variants-code-panel">
          <div class="code-container">
            <pre><code class="language-html">{`<ag-toggle variant="default" checked label="Default (Primary)"></ag-toggle>
<ag-toggle variant="success" checked label="Success (Green)"></ag-toggle>
<ag-toggle variant="warning" checked label="Warning (Yellow)"></ag-toggle>
<ag-toggle variant="danger" checked label="Danger (Red)"></ag-toggle>`}</code></pre>
          </div>
        </ag-tab-panel>
      </ag-tabs>
    </div>
  </section>

  <section>
    <h2>Form Integration</h2>
    <p>Toggle switches work seamlessly with forms:</p>

    <div class="component-showcase">
      <ag-tabs activation="manual" active-tab="0" aria-label="Form integration example">
        <ag-tab slot="tab" panel="form-preview-panel">Preview</ag-tab>
        <ag-tab slot="tab" panel="form-code-panel">Code</ag-tab>

        <ag-tab-panel slot="panel" id="form-preview-panel">
          <div class="preview-container">
            <div class="demo-container">
              <form>
                <div class="demo-row">
                  <ag-toggle name="newsletter" value="enabled" label="Subscribe to newsletter"></ag-toggle>
                </div>
                <div class="demo-row">
                  <ag-toggle name="marketing" value="enabled" label="Receive marketing emails"></ag-toggle>
                </div>
                <div class="demo-row">
                  <ag-toggle name="updates" value="enabled" checked label="Product updates"></ag-toggle>
                </div>
              </form>
            </div>
          </div>
        </ag-tab-panel>

        <ag-tab-panel slot="panel" id="form-code-panel">
          <div class="code-container">
            <pre><code class="language-html">{`<form>
  <ag-toggle name="newsletter" value="enabled" label="Subscribe to newsletter"></ag-toggle>
  <ag-toggle name="marketing" value="enabled" label="Receive marketing emails"></ag-toggle>
  <ag-toggle name="updates" value="enabled" checked label="Product updates"></ag-toggle>
</form>`}</code></pre>
          </div>
        </ag-tab-panel>
      </ag-tabs>
    </div>
  </section>

  <section>
    <h2>Accessibility Features</h2>
    <p>All toggle switches include proper ARIA attributes and keyboard navigation:</p>

    <div class="component-showcase">
      <ag-tabs activation="manual" active-tab="0" aria-label="Accessibility features example">
        <ag-tab slot="tab" panel="a11y-preview-panel">Preview</ag-tab>
        <ag-tab slot="tab" panel="a11y-code-panel">Code</ag-tab>

        <ag-tab-panel slot="panel" id="a11y-preview-panel">
          <div class="preview-container">
            <div class="demo-container">
              <ul>
                <li><strong>Switch Role:</strong> Uses <code>role="switch"</code> for screen readers</li>
                <li><strong>State Communication:</strong> <code>aria-checked</code> indicates current state</li>
                <li><strong>Keyboard Navigation:</strong> Space key toggles state</li>
                <li><strong>Focus Management:</strong> Visible focus indicators</li>
                <li><strong>Label Association:</strong> Proper label-control relationship</li>
              </ul>
              <div class="demo-row">
                <ag-toggle label="Try keyboard navigation (Tab to focus, Space to toggle)"></ag-toggle>
              </div>
            </div>
          </div>
        </ag-tab-panel>

        <ag-tab-panel slot="panel" id="a11y-code-panel">
          <div class="code-container">
            <pre><code class="language-html">{`<!-- Accessible toggle with proper ARIA attributes -->
<ag-toggle
  role="switch"
  aria-checked="false"
  aria-labelledby="toggle-label"
  label="Enable feature"
></ag-toggle>

<!-- Toggle automatically includes:
- role="switch"
- aria-checked state
- keyboard navigation
- focus management
- label association
-->`}</code></pre>
          </div>
        </ag-tab-panel>
      </ag-tabs>
    </div>
  </section>

  <section>
    <h2>React Integration</h2>
    <p>
      The ReactToggle wrapper provides seamless integration with React
      applications while maintaining all the accessibility features of the
      underlying web component.
    </p>
    <ReactToggleDemo client:only="react" />
  </section>

  <section>
    <h2>Vue Integration</h2>
    <p>
      The VueToggle wrapper provides seamless integration with Vue 3 applications
      using the Composition API while maintaining all the accessibility features
      of the underlying web component.
    </p>
    <VueToggleDemo client:only="vue" />
  </section>

  <section>
    <h2>Svelte Integration</h2>
    <p>
      AgnosticUI components work excellently with Svelte 5 using direct web component integration.
      This approach provides the best performance and reliability while maintaining full reactivity
      and all accessibility features.
    </p>
    <SvelteToggleDemo client:only="svelte" />
  </section>
</div>