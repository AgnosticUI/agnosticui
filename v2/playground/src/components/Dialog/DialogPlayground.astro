---
import { Home, MessageSquare, AlertCircle } from "lucide-astro";
import ReactDialogDemo from "../ReactDialogDemo.tsx";
import VueDialogDemo from "../VueDialogDemo.vue";
import SvelteDialogDemo from "../SvelteDialogDemo.svelte";
---

<style is:global>
  .nav-breadcrumb {
    margin-bottom: 1rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--c-border);
  }

  .nav-home {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--c-text-light);
    font-size: 0.9rem;
    text-decoration: none;
    transition: color 0.2s ease;
  }

  .nav-home:hover {
    color: var(--ag-primary);
  }

  .nav-home svg {
    width: 1.25rem;
    height: 1.25rem;
  }

  /* AgnosticUI Button Styling */
  ag-button {
    --button-bg: var(--c-card-bg);
    --button-border: var(--c-border);
    --button-color: var(--c-text);
    --button-padding: 0.5rem 1rem;
    --button-radius: 0.375rem;
    --button-font-weight: 500;
  }

  ag-button::part(button) {
    background: var(--button-bg);
    border: 1px solid var(--button-border);
    color: var(--button-color);
    padding: var(--button-padding);
    border-radius: var(--button-radius);
    font-weight: var(--button-font-weight);
    transition: all 0.2s ease;
  }

  /* High contrast focus ring for all button variants */
  ag-button::part(button):focus-visible {
    outline: 2px solid var(--ag-focus);
    outline-offset: 2px;
  }

  /* Default button hover */
  ag-button::part(button):hover:not(:disabled) {
    background: var(--c-bg-secondary);
    border-color: var(--ag-primary);
  }

  /* Primary variant */
  ag-button[variant="primary"]::part(button) {
    background: var(--ag-primary);
    color: white;
    border-color: var(--ag-primary);
  }

  ag-button[variant="primary"]::part(button):hover:not(:disabled) {
    background: var(--ag-primary-hover);
    border-color: var(--ag-primary-hover);
  }

  /* Secondary variant */
  ag-button[variant="secondary"]::part(button) {
    background: transparent;
    color: var(--ag-primary);
    border-color: var(--ag-primary);
  }

  ag-button[variant="secondary"]::part(button):hover:not(:disabled) {
    background: var(--ag-primary);
    color: white;
    border-color: var(--ag-primary);
  }

  /* Danger variant */
  ag-button[variant="danger"]::part(button) {
    background: var(--ag-danger);
    color: white;
    border-color: var(--ag-danger);
  }

  ag-button[variant="danger"]::part(button):hover:not(:disabled) {
    background: var(--ag-danger-hover);
    border-color: var(--ag-danger-hover);
  }

  /* Outline variant */
  ag-button[variant="outline"]::part(button) {
    background: transparent;
    color: var(--c-text);
    border-color: var(--c-border);
  }

  ag-button[variant="outline"]::part(button):hover:not(:disabled) {
    background: var(--c-bg-secondary);
    border-color: var(--ag-primary);
    color: var(--ag-primary);
  }

  /* Dialog styling to match theme */
  ag-dialog {
    --dialog-bg: var(--c-card-bg);
    --dialog-border: var(--c-card-border);
    --dialog-description-color: var(--c-text-light);
    --dialog-heading-color: var(--c-text);
    --dialog-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  }
</style>

<div>
  <nav class="nav-breadcrumb">
    <a href="/" class="nav-home">
      <Home />
      <span>Home</span>
    </a>
    / Dialog
  </nav>

  <h1>Dialog Component</h1>
  <p>Modal dialog component with accessibility features.</p>

  <section>
    <h2>Focus Trapping Demo</h2>
    <p style="color: var(--c-text-light); margin-bottom: 1rem;">
      This dialog demonstrates focus trapping with multiple interactive
      elements. Try:
      <br />• <strong>Tab</strong> to move forward through focusable elements
      <br />• <strong>Shift+Tab</strong> to move backward
      <br />• <strong>Escape</strong> to close the dialog
      <br />• Notice how focus stays trapped within the dialog boundaries
    </p>
    <ag-dialog
      id="demo-dialog"
      heading="Focus Trapping Demo"
      description="Use Tab and Shift+Tab to navigate between these buttons. Notice how focus stays within the dialog."
      show-close-button="true"
    >
      <div style="display: flex; flex-direction: column; gap: 0.75rem;">
        <ag-button variant="primary">Primary Button</ag-button>

        <input
          type="text"
          placeholder="Focus me with Tab"
          style="background: var(--c-card-bg); border: 1px solid var(--c-card-border); padding: 0.5rem; border-radius: 0.5rem;"
        />

        <ag-button variant="secondary">Secondary Button</ag-button>

        <textarea
          placeholder="Try typing here..."
          style="background: var(--c-card-bg); border: 1px solid var(--c-card-border); padding: 0.5rem; border-radius: 0.5rem; min-height: 60px; resize: vertical;"
        ></textarea>

        <div
          style="display: flex; gap: 0.5rem; justify-content: flex-end; margin-top: 0.5rem;"
        >
          <ag-button
            variant="outline"
            onclick="document.getElementById('demo-dialog').open = false"
            >Cancel</ag-button
          >
          <ag-button
            variant="danger"
            onclick="document.getElementById('demo-dialog').open = false"
            >Confirm Action</ag-button
          >
        </div>
      </div>
    </ag-dialog>
    <button onclick="document.getElementById('demo-dialog').open = true"
      >Open Dialog</button
    >
  </section>

  <section>
    <h2>React Integration</h2>
    <p>
      The ReactDialog wrapper provides seamless integration with React
      applications while maintaining all the accessibility features of the
      underlying web component.
    </p>
    <ReactDialogDemo client:only="react" />
  </section>

  <section>
    <h2>Vue Integration</h2>
    <p>
      The VueDialog wrapper provides seamless integration with Vue 3 applications
      using the Composition API while maintaining all the accessibility features
      of the underlying web component.
    </p>
    <VueDialogDemo client:only="vue" />
  </section>

  <section>
    <h2>Svelte Integration</h2>
    <p>
      AgnosticUI dialogs work excellently with Svelte 5 using direct web component integration.
      This approach provides the best performance and reliability while maintaining full reactivity
      and all accessibility features.
    </p>
    <SvelteDialogDemo client:only="svelte" />
  </section>
</div>

<script>
  document.addEventListener("DOMContentLoaded", async () => {
    try {
      // Import the Dialog component
      await import("agnosticui-core");

      // Wait for the custom element to be defined
      await customElements.whenDefined("ag-dialog");
    } catch (error) {
      console.error("Error loading dialog component:", error);
    }
  });
</script>
