---
import ReactButtonDemo from "../ReactButtonDemo.tsx";
import VueButtonDemo from "../VueButtonDemo.vue";
import SimpleSvelteButtonDemo from "../SimpleSvelteButtonDemo.svelte";
import { Home, Download, Heart, Plus, Settings } from "lucide-astro";
---

<style is:global>
  /* Shared styles are loaded in BaseLayout */

  body {
    margin: 0;
    padding: 0;
    background: var(--c-bg-secondary);
  }

  .nav-breadcrumb {
    margin-bottom: 1rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--c-border);
  }

  .nav-home {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--ag-text-secondary);
    font-size: 0.9rem;
    text-decoration: none;
    transition: color 0.2s ease;
  }

  .nav-home:hover {
    color: var(--ag-primary);
  }

  .nav-home svg {
    width: 1.25rem;
    height: 1.25rem;
  }

  h1,
  h2 {
    margin: 1rem 0;
  }

  section {
    margin: 2rem 0;
    padding: 1rem;
    border: 1px solid var(--c-border);
    border-radius: 8px;
    text-align: left;
  }

  .button-examples {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    margin: 1rem 0;
    align-items: center;
  }

  ag-button {
    --button-bg: var(--c-card-bg);
    --button-border: var(--c-border);
    --button-color: var(--ag-text-primary);
    --button-padding: 0.5rem 1rem;
    --button-radius: 0.375rem;
    --button-font-weight: 500;
  }

  ag-button::part(button) {
    background: var(--button-bg);
    border: 1px solid var(--button-border);
    color: var(--button-color);
    padding: var(--button-padding);
    border-radius: var(--button-radius);
    font-weight: var(--button-font-weight);
    transition: all 0.2s ease;
  }

  /* High contrast focus ring for all button variants */
  ag-button::part(button):focus-visible {
    outline: var(--ag-focus-width) solid var(--ag-focus);
    outline-offset: var(--ag-focus-offset);
  }

  /* Default button hover - darken for white text on colored bg */
  ag-button::part(button):hover:not(:disabled) {
    background: var(--c-bg-secondary);
    border-color: var(--ag-primary);
  }

  /* Primary variant - support both variant attribute and class */
  ag-button[variant="primary"]::part(button),
  ag-button.primary::part(button) {
    background: var(--ag-primary);
    color: white;
    border-color: var(--ag-primary);
  }

  /* Primary hover - darken background (white text, so darken) */
  ag-button[variant="primary"]::part(button):hover:not(:disabled),
  ag-button.primary::part(button):hover:not(:disabled) {
    background: var(--ag-primary-hover);
    border-color: var(--ag-primary-hover);
  }

  /* Secondary variant - support both variant attribute and class */
  ag-button[variant="secondary"]::part(button),
  ag-button.secondary::part(button) {
    background: transparent;
    color: var(--ag-primary);
    border-color: var(--ag-primary);
  }

  /* Secondary hover - fill with primary color (maintains contrast) */
  ag-button[variant="secondary"]::part(button):hover:not(:disabled),
  ag-button.secondary::part(button):hover:not(:disabled) {
    background: var(--ag-primary);
    color: white;
    border-color: var(--ag-primary);
  }

  /* Danger variant - support both variant attribute and class */
  ag-button[variant="danger"]::part(button),
  ag-button.danger::part(button) {
    background: var(--ag-danger);
    color: white;
    border-color: var(--ag-danger);
  }

  /* Danger hover - darken background (white text, so darken) */
  ag-button[variant="danger"]::part(button):hover:not(:disabled),
  ag-button.danger::part(button):hover:not(:disabled) {
    background: var(--ag-danger-hover);
    border-color: var(--ag-danger-hover);
  }

  /* Size variants - support both size attribute and class */
  ag-button[size="sm"]::part(button),
  ag-button.sm::part(button) {
    padding: 0.375rem 0.75rem;
    font-size: 0.875rem;
  }

  ag-button[size="lg"]::part(button),
  ag-button.lg::part(button) {
    padding: 0.75rem 1.5rem;
    font-size: 1.125rem;
  }

  .code-example {
    background: var(--ag-background-secondary);
    color: var(--ag-text-primary);
    padding: 1rem;
    border-radius: 8px;
    font-family: "Monaco", "Menlo", monospace;
    font-size: 0.875rem;
    margin: 1rem 0;
    overflow-x: auto;
  }

  .feature-list {
    list-style: none;
    padding: 0;
  }

  .feature-list li {
    padding: 0.25rem 0;
    color: var(--ag-text-secondary);
  }

  .feature-list li:before {
    content: "âœ“";
    color: var(--ag-primary);
    font-weight: bold;
    margin-right: 0.5rem;
  }
</style>

<div class="nav-breadcrumb">
  <a href="/" class="nav-home">
    <Home />
    <span>Back to Components</span>
  </a>
</div>

<h1>Button Playground</h1>

<section>
  <h2>Core Button Component</h2>
  <p>
    This demonstrates the core AgnosticUI button component with full
    accessibility features and APG compliance.
  </p>

  <div class="component-showcase">
    <ag-tabs
      activation="manual"
      active-tab="0"
      aria-label="Core Button Component example"
    >
      <ag-tab slot="tab" panel="core-preview-panel">Preview</ag-tab>
      <ag-tab slot="tab" panel="core-code-panel">Code</ag-tab>

      <ag-tab-panel slot="panel" id="core-preview-panel">
        <div class="preview-container">
          <div class="button-examples">
            <ag-button>Default Button</ag-button>
            <ag-button variant="primary">Primary Button</ag-button>
            <ag-button variant="secondary">Secondary Button</ag-button>
            <ag-button variant="danger">Danger Button</ag-button>
          </div>

          <ul class="feature-list">
            <li>Semantic button element foundation</li>
            <li>Space/Enter keyboard activation</li>
            <li>Almost headless styling approach</li>
            <li>APG-compliant accessibility</li>
          </ul>
        </div>
      </ag-tab-panel>

      <ag-tab-panel slot="panel" id="core-code-panel">
        <div class="code-container">
          <pre><code class="language-html">{`<!-- Default Button -->
<ag-button>Default Button</ag-button>

<!-- Primary Button -->
<ag-button variant="primary">Primary Button</ag-button>

<!-- Secondary Button -->
<ag-button variant="secondary">Secondary Button</ag-button>

<!-- Danger Button -->
<ag-button variant="danger">Danger Button</ag-button>`}</code></pre>
        </div>
      </ag-tab-panel>
    </ag-tabs>
  </div>
</section>

<section>
  <h2>Button Types</h2>
  <p>
    Buttons support different types for form interactions: button (default),
    submit, and reset.
  </p>

  <div class="component-showcase">
    <ag-tabs
      activation="manual"
      active-tab="0"
      aria-label="Button Types example"
    >
      <ag-tab slot="tab" panel="types-preview-panel">Preview</ag-tab>
      <ag-tab slot="tab" panel="types-code-panel">Code</ag-tab>

      <ag-tab-panel slot="panel" id="types-preview-panel">
        <div class="preview-container">
          <div class="button-examples">
            <ag-button type="button">Button Type</ag-button>
            <ag-button type="submit" variant="primary">Submit</ag-button>
            <ag-button type="reset" variant="secondary">Reset</ag-button>
          </div>
        </div>
      </ag-tab-panel>

      <ag-tab-panel slot="panel" id="types-code-panel">
        <div class="code-container">
          <pre><code class="language-html">{`<!-- Button type (default) -->
<ag-button type="button">Button Type</ag-button>

<!-- Submit type -->
<ag-button type="submit" variant="primary">Submit</ag-button>

<!-- Reset type -->
<ag-button type="reset" variant="secondary">Reset</ag-button>`}</code></pre>
        </div>
      </ag-tab-panel>
    </ag-tabs>
  </div>
</section>

<section>
  <h2>Button States</h2>
  <p>
    Buttons support disabled and loading states with proper ARIA attributes.
  </p>

  <div class="component-showcase">
    <ag-tabs
      activation="manual"
      active-tab="0"
      aria-label="Button States example"
    >
      <ag-tab slot="tab" panel="states-preview-panel">Preview</ag-tab>
      <ag-tab slot="tab" panel="states-code-panel">Code</ag-tab>

      <ag-tab-panel slot="panel" id="states-preview-panel">
        <div class="preview-container">
          <div class="button-examples">
            <ag-button disabled>Disabled Button</ag-button>
            <ag-button loading variant="primary">Loading Button</ag-button>
          </div>
        </div>
      </ag-tab-panel>

      <ag-tab-panel slot="panel" id="states-code-panel">
        <div class="code-container">
          <pre><code class="language-html">{`<!-- Disabled state -->
<ag-button disabled>Disabled Button</ag-button>

<!-- Loading state -->
<ag-button loading variant="primary">Loading Button</ag-button>`}</code></pre>
        </div>
      </ag-tab-panel>
    </ag-tabs>
  </div>
</section>

<section>
  <h2>Toggle Functionality</h2>
  <p>Buttons can act as toggle controls with pressed state management.</p>

  <div class="component-showcase">
    <ag-tabs
      activation="manual"
      active-tab="0"
      aria-label="Toggle Functionality example"
    >
      <ag-tab slot="tab" panel="toggle-preview-panel">Preview</ag-tab>
      <ag-tab slot="tab" panel="toggle-code-panel">Code</ag-tab>

      <ag-tab-panel slot="panel" id="toggle-preview-panel">
        <div class="preview-container">
          <div class="button-examples">
            <ag-button toggle>Toggle Button</ag-button>
            <ag-button toggle pressed="true">Starts Pressed</ag-button>
          </div>
        </div>
      </ag-tab-panel>

      <ag-tab-panel slot="panel" id="toggle-code-panel">
        <div class="code-container">
          <pre><code class="language-html">{`<!-- Toggle button -->
<ag-button toggle>Toggle Button</ag-button>

<!-- Toggle button starting pressed -->
<ag-button toggle pressed="true">Starts Pressed</ag-button>`}</code></pre>
        </div>
      </ag-tab-panel>
    </ag-tabs>
  </div>
</section>

<section>
  <h2>Size Variants</h2>
  <p>Buttons support different sizes through the size attribute.</p>

  <div class="component-showcase">
    <ag-tabs
      activation="manual"
      active-tab="0"
      aria-label="Size Variants example"
    >
      <ag-tab slot="tab" panel="sizes-preview-panel">Preview</ag-tab>
      <ag-tab slot="tab" panel="sizes-code-panel">Code</ag-tab>

      <ag-tab-panel slot="panel" id="sizes-preview-panel">
        <div class="preview-container">
          <div class="button-examples">
            <ag-button size="sm" variant="primary">Small</ag-button>
            <ag-button variant="primary">Medium</ag-button>
            <ag-button size="lg" variant="primary">Large</ag-button>
          </div>
        </div>
      </ag-tab-panel>

      <ag-tab-panel slot="panel" id="sizes-code-panel">
        <div class="code-container">
          <pre><code class="language-html">{`<!-- Small button -->
<ag-button size="sm" variant="primary">Small</ag-button>

<!-- Medium button (default) -->
<ag-button variant="primary">Medium</ag-button>

<!-- Large button -->
<ag-button size="lg" variant="primary">Large</ag-button>`}</code></pre>
        </div>
      </ag-tab-panel>
    </ag-tabs>
  </div>
</section>

<section>
  <h2>Icons and Content</h2>
  <p>
    Buttons can contain any content including icons, text, and mixed content.
  </p>

  <div class="component-showcase">
    <ag-tabs
      activation="manual"
      active-tab="0"
      aria-label="Icons and Content example"
    >
      <ag-tab slot="tab" panel="icons-preview-panel">Preview</ag-tab>
      <ag-tab slot="tab" panel="icons-code-panel">Code</ag-tab>

      <ag-tab-panel slot="panel" id="icons-preview-panel">
        <div class="preview-container">
          <div class="button-examples">
            <ag-button variant="primary">
              <Download
                style="width: 1rem; height: 1rem; margin-right: 0.5rem;"
              />
              Download
            </ag-button>
            <ag-button variant="secondary">
              <Settings style="width: 1rem; height: 1rem;" />
            </ag-button>
          </div>
        </div>
      </ag-tab-panel>

      <ag-tab-panel slot="panel" id="icons-code-panel">
        <div class="code-container">
          <pre><code class="language-html">{`<!-- Button with icon and text -->
<ag-button variant="primary">
  <svg width="16" height="16">...</svg>
  Download
</ag-button>

<!-- Icon-only button -->
<ag-button variant="secondary">
  <svg width="16" height="16">...</svg>
</ag-button>`}</code></pre>
        </div>
      </ag-tab-panel>
    </ag-tabs>
  </div>
</section>

<section>
  <h2>React Integration</h2>
  <p>
    The ReactButton wrapper provides seamless integration with React
    applications while maintaining all the accessibility features of the
    underlying web component.
  </p>

  <div class="component-showcase">
    <ag-tabs
      activation="manual"
      active-tab="0"
      aria-label="React Integration example"
    >
      <ag-tab slot="tab" panel="react-preview-panel">Preview</ag-tab>
      <ag-tab slot="tab" panel="react-code-panel">Code</ag-tab>

      <ag-tab-panel slot="panel" id="react-preview-panel">
        <div class="preview-container">
          <ReactButtonDemo client:only="react" />
        </div>
      </ag-tab-panel>

      <ag-tab-panel slot="panel" id="react-code-panel">
        <div class="code-container">
          <pre><code class="language-tsx">{`import { ReactButton } from 'agnosticui-react';

const MyComponent = () => {
  const handleClick = (event) => {
    console.log('Button clicked:', event.detail);
  };

  return (
    <div>
      <ReactButton
        variant="primary"
        onClick={handleClick}
      >
        Click Me
      </ReactButton>

      <ReactButton
        variant="secondary"
        size="lg"
        disabled
      >
        Disabled
      </ReactButton>
    </div>
  );
};

export default MyComponent;`}</code></pre>
        </div>
      </ag-tab-panel>
    </ag-tabs>
  </div>
</section>

<section>
  <h2>Vue Integration</h2>
  <p>
    The VueButton wrapper provides seamless integration with Vue 3 applications
    using the Composition API while maintaining all the accessibility features
    of the underlying web component.
  </p>

  <div class="component-showcase">
    <ag-tabs
      activation="manual"
      active-tab="0"
      aria-label="Vue Integration example"
    >
      <ag-tab slot="tab" panel="vue-preview-panel">Preview</ag-tab>
      <ag-tab slot="tab" panel="vue-code-panel">Code</ag-tab>

      <ag-tab-panel slot="panel" id="vue-preview-panel">
        <div class="preview-container">
          <VueButtonDemo client:only="vue" />
        </div>
      </ag-tab-panel>

      <ag-tab-panel slot="panel" id="vue-code-panel">
        <div class="code-container">
          <pre><code class="language-html">{`<template>
  <div>
    <VueButton
      variant="primary"
      @click="handleClick"
    >
      Click Me
    </VueButton>

    <VueButton
      variant="danger"
      size="sm"
      :loading="isLoading"
      @click="handleAsyncAction"
    >
      {{ isLoading ? 'Loading...' : 'Async Action' }}
    </VueButton>
  </div>
</template>

<script setup>
import { ref } from 'vue';
import { VueButton } from 'agnosticui-vue';

const isLoading = ref(false);

const handleClick = (event) => {
  console.log('Button clicked:', event.detail);
};

const handleAsyncAction = async () => {
  isLoading.value = true;
  await new Promise(resolve => setTimeout(resolve, 2000));
  isLoading.value = false;
};
</script>`}</code></pre>
        </div>
      </ag-tab-panel>
    </ag-tabs>
  </div>
</section>

<section>
  <h2>Svelte Integration</h2>
  <p>
    AgnosticUI components work excellently with Svelte 5 using direct web
    component integration. This approach provides the best performance and
    reliability while maintaining full reactivity and all accessibility
    features.
  </p>

  <div class="component-showcase">
    <ag-tabs
      activation="manual"
      active-tab="0"
      aria-label="Svelte Integration example"
    >
      <ag-tab slot="tab" panel="svelte-preview-panel">Preview</ag-tab>
      <ag-tab slot="tab" panel="svelte-code-panel">Code</ag-tab>

      <ag-tab-panel slot="panel" id="svelte-preview-panel">
        <div class="preview-container">
          <SimpleSvelteButtonDemo client:only="svelte" />
        </div>
      </ag-tab-panel>

      <ag-tab-panel slot="panel" id="svelte-code-panel">
        <div class="code-container">
          <pre><code class="language-html">{`<script>
  import 'agnosticui-core';
  import { onMount } from 'svelte';

  let buttonRef;
  let isLoading = false;

  onMount(() => {
    if (buttonRef) {
      buttonRef.addEventListener('click', handleClick);
    }
  });

  const handleClick = (event) => {
    console.log('Svelte button clicked:', event.detail);
  };

  const handleAsyncAction = async () => {
    isLoading = true;
    // Simulate async operation
    await new Promise(resolve => setTimeout(resolve, 2000));
    isLoading = false;
  };
</script>

<ag-button bind:this={buttonRef} variant="primary">
  Click Me
</ag-button>

<ag-button
  variant="secondary"
  loading={isLoading}
  on:click={handleAsyncAction}
>
  {isLoading ? 'Loading...' : 'Async Action'}
</ag-button>`}</code></pre>
        </div>
      </ag-tab-panel>
    </ag-tabs>
  </div>
</section>

<section>
  <h2>Pure Lit Event Examples</h2>
  <p
    style="font-size: 0.875rem; color: var(--ag-text-secondary); margin: 0 0 1rem 0; padding: 0.5rem; background: var(--c-bg-secondary); border-radius: 4px; border: 1px solid var(--c-border);"
  >
    ðŸ’¡ <strong>Console Logging:</strong> Open your browser console (<kbd
      >F12</kbd
    > â†’ Console tab) to see click events from these pure web component examples.
  </p>

  <div class="component-showcase">
    <ag-tabs
      activation="manual"
      active-tab="0"
      aria-label="Pure Lit Event Examples"
    >
      <ag-tab slot="tab" panel="events-preview-panel">Preview</ag-tab>
      <ag-tab slot="tab" panel="events-code-panel">Code</ag-tab>

      <ag-tab-panel slot="panel" id="events-preview-panel">
        <div class="preview-container">
          <div
            style="display: flex; gap: 1rem; flex-wrap: wrap; margin: 1rem 0;"
          >
            <ag-button id="pure-lit-button-1">Pure Lit Button</ag-button>
            <ag-button id="pure-lit-button-2" class="primary"
              >Primary Button</ag-button
            >
            <ag-button id="pure-lit-button-3" class="secondary"
              >Secondary Button</ag-button
            >
            <ag-button id="pure-lit-button-4" class="danger"
              >Danger Button</ag-button
            >
          </div>

          <div
            style="display: flex; gap: 1rem; flex-wrap: wrap; margin: 1rem 0;"
          >
            <ag-button id="pure-lit-button-5" type="submit"
              >Submit Type</ag-button
            >
            <ag-button id="pure-lit-button-6" toggle>Toggle Button</ag-button>
            <ag-button id="pure-lit-button-7" disabled
              >Disabled Button</ag-button
            >
          </div>

          <p>
            Use these patterns in vanilla JavaScript applications or any custom
            framework integration.
          </p>
        </div>
      </ag-tab-panel>

      <ag-tab-panel slot="panel" id="events-code-panel">
        <div class="code-container">
          <pre><code class="language-html">{`<!-- Pure web component buttons -->
<ag-button id="pure-lit-button-1">Pure Lit Button</ag-button>
<ag-button id="pure-lit-button-2" class="primary">Primary Button</ag-button>
<ag-button id="pure-lit-button-3" toggle>Toggle Button</ag-button>

<script>
// Event handling with vanilla JavaScript
document.addEventListener('DOMContentLoaded', () => {
  const buttons = document.querySelectorAll('[id^="pure-lit-button-"]');

  buttons.forEach((button) => {
    // Click events
    button.addEventListener('click', (event) => {
      const target = event.target;
      console.log('Button clicked:', {
        buttonId: target.id,
        text: target.textContent?.trim(),
        type: target.type || 'button',
        disabled: target.disabled,
        variant: target.className || 'default'
      });
    });

    // Toggle events (for toggle buttons)
    if (button.hasAttribute('toggle')) {
      button.addEventListener('toggle', (event) => {
        console.log('Toggle state:', {
          buttonId: button.id,
          pressed: event.detail.pressed
        });
      });
    }
  });
});
</script>`}</code></pre>
        </div>
      </ag-tab-panel>
    </ag-tabs>
  </div>
</section>

<script>
  // Pure Lit Event Examples - Client-side only setup
  if (typeof window !== "undefined") {
    // Load agnosticui-core on client side
    import("agnosticui-core");

    document.addEventListener("DOMContentLoaded", () => {
      // Get all pure lit buttons
      const pureLitButtons = document.querySelectorAll(
        '[id^="pure-lit-button-"]'
      );

      pureLitButtons.forEach((button, index) => {
        // Listen for click events
        button.addEventListener("click", (event) => {
          const target = event.target as any;
          const buttonText = target.textContent?.trim() || "Unknown Button";
          console.log(`ðŸ”˜ Pure Lit Button clicked: "${buttonText}"`, {
            buttonId: target.id,
            type: target.type || target.getAttribute("type") || "button",
            disabled: target.disabled,
            variant:
              target.className || target.getAttribute("class") || "default",
            timestamp: new Date().toLocaleTimeString(),
            eventType: "pure-lit-click",
          });
        });

        // Listen for toggle events (for toggle buttons)
        if (button.hasAttribute("toggle")) {
          button.addEventListener("toggle", (event) => {
            const detail = (event as any).detail;
            console.log(
              `ðŸ”€ Pure Lit Toggle Button: ${detail.pressed ? "PRESSED" : "NOT PRESSED"}`,
              {
                buttonId: button.id,
                pressed: detail.pressed,
                timestamp: new Date().toLocaleTimeString(),
                eventType: "pure-lit-toggle",
              }
            );
          });
        }

        console.log(
          `âœ… Pure Lit event listeners attached to button ${index + 1}`
        );
      });

      // Initialize syntax highlighting for tab content
      if (typeof window.initSyntaxHighlighting === "function") {
        window.initSyntaxHighlighting();
      }
    });
  }
</script>
