---
import ReactBreadcrumbDemo from "../ReactBreadcrumbDemo.tsx";
import VueBreadcrumbDemo from "../VueBreadcrumbDemo.vue";
import SvelteBreadcrumbDemo from "../SvelteBreadcrumbDemo.svelte";
import { Home } from "lucide-astro";
---

<style is:global>
  body {
    margin: 0;
    padding: 0;
    background: var(--c-bg-secondary);
  }

  .nav-breadcrumb {
    margin-bottom: 1rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--c-border);
  }

  .nav-home {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--ag-text-secondary);
    font-size: 0.9rem;
    text-decoration: none;
    transition: color 0.2s ease;
  }

  .nav-home:hover {
    color: var(--ag-primary);
  }

  .nav-home svg {
    width: 1.25rem;
    height: 1.25rem;
  }

  h1,
  h2 {
    margin: 1rem 0;
  }

  section {
    margin: 2rem 0;
    padding: 1rem;
    border: 1px solid var(--c-border);
    border-radius: 8px;
    text-align: left;
  }

  .breadcrumb-examples {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin: 1rem 0;
  }

  .breadcrumb-example {
    padding: 1rem;
    border: 1px solid var(--c-border);
    border-radius: 0.375rem;
    background: var(--c-card-bg);
  }

  .breadcrumb-label {
    font-size: 0.875rem;
    color: var(--ag-text-secondary);
    margin-bottom: 0.5rem;
    font-weight: 500;
  }

  ag-breadcrumb {
    --ag-primary: var(--ag-primary);
    --ag-primary-hover: var(--ag-primary-hover);
    --ag-text-primary: var(--ag-text-primary);
    --ag-text-secondary: var(--ag-text-secondary);
    --ag-background-secondary: var(--ag-background-secondary);
    --ag-border-radius: var(--ag-radius-md);
    --ag-space-1: var(--ag-space-1);
    --ag-space-2: var(--ag-space-2);
    --ag-transition-duration: var(--ag-motion-medium);
    --ag-focus: var(--ag-focus);
    --ag-focus-width: var(--ag-focus-width);
    --ag-focus-offset: var(--ag-focus-offset);
  }

  .code-example {
    background: var(--c-bg-secondary);
    border: 1px solid var(--c-border);
    color: var(--ag-text-primary);
    padding: 1rem;
    border-radius: var(--ag-radius-md);
    font-family: "Monaco", "Menlo", monospace;
    font-size: 0.875rem;
    margin: 1rem 0;
    overflow-x: auto;
  }

  .feature-list {
    list-style: none;
    padding: 0;
  }

  .feature-list li {
    padding: 0.25rem 0;
    color: var(--ag-text-secondary);
  }

  .feature-list li:before {
    content: "‚úì";
    color: var(--ag-primary);
    font-weight: bold;
    margin-right: 0.5rem;
  }
</style>

<div class="nav-breadcrumb">
  <a href="/" class="nav-home">
    <Home />
    <span>Back to Components</span>
  </a>
</div>

<h1>Breadcrumb Playground</h1>

<section>
  <h2>Core Breadcrumb Component</h2>
  <p>
    This demonstrates the core AgnosticUI breadcrumb component implementing the WAI-ARIA Breadcrumb pattern
    with comprehensive accessibility features and multiple separator styles.
  </p>

  <div class="component-showcase">
    <ag-tabs activation="manual" active-tab="0" aria-label="Core Breadcrumb Component example">
      <ag-tab slot="tab" panel="core-preview-panel">Preview</ag-tab>
      <ag-tab slot="tab" panel="core-code-panel">Code</ag-tab>

      <ag-tab-panel slot="panel" id="core-preview-panel">
        <div class="preview-container">
          <div class="breadcrumb-examples">
            <div class="breadcrumb-example">
              <div class="breadcrumb-label">Simple Breadcrumb (Default Separator)</div>
              <ag-breadcrumb id="breadcrumb-1"></ag-breadcrumb>
            </div>

            <div class="breadcrumb-example">
              <div class="breadcrumb-label">Complex Navigation Path</div>
              <ag-breadcrumb id="breadcrumb-2"></ag-breadcrumb>
            </div>
          </div>

          <ul class="feature-list">
            <li>WAI-ARIA Breadcrumb pattern compliance</li>
            <li>Semantic nav landmark with ordered list</li>
            <li>Current page indication with aria-current="page"</li>
            <li>Almost headless styling approach</li>
          </ul>
        </div>
      </ag-tab-panel>

      <ag-tab-panel slot="panel" id="core-code-panel">
        <div class="code-container">
          <pre><code class="language-html">{`<!-- Simple Breadcrumb -->
<ag-breadcrumb id="breadcrumb-1"></ag-breadcrumb>

<!-- Complex Navigation Path -->
<ag-breadcrumb id="breadcrumb-2"></ag-breadcrumb>

<script>
// Sample breadcrumb data
const simpleBreadcrumb = [
  { label: 'Home', href: '/' },
  { label: 'Current Page', current: true }
];

const complexBreadcrumb = [
  { label: 'Home', href: '/' },
  { label: 'Products', href: '/products' },
  { label: 'Electronics', href: '/products/electronics' },
  { label: 'Smartphones', href: '/products/electronics/smartphones' },
  { label: 'iPhone 15 Pro', current: true }
];

// Apply data to breadcrumbs
document.getElementById('breadcrumb-1').items = simpleBreadcrumb;
document.getElementById('breadcrumb-2').items = complexBreadcrumb;
</script>`}</code></pre>
        </div>
      </ag-tab-panel>
    </ag-tabs>
  </div>
</section>

<section>
  <h2>Separator Types</h2>
  <p>
    Breadcrumbs support multiple separator styles: chevron (default), slash, bullet, and arrow.
  </p>

  <div class="component-showcase">
    <ag-tabs activation="manual" active-tab="0" aria-label="Separator Types example">
      <ag-tab slot="tab" panel="separator-preview-panel">Preview</ag-tab>
      <ag-tab slot="tab" panel="separator-code-panel">Code</ag-tab>

      <ag-tab-panel slot="panel" id="separator-preview-panel">
        <div class="preview-container">
          <div class="breadcrumb-examples">
            <div class="breadcrumb-example">
              <div class="breadcrumb-label">Slash Separator</div>
              <ag-breadcrumb type="slash" id="breadcrumb-slash"></ag-breadcrumb>
            </div>

            <div class="breadcrumb-example">
              <div class="breadcrumb-label">Arrow Separator</div>
              <ag-breadcrumb type="arrow" id="breadcrumb-arrow"></ag-breadcrumb>
            </div>
          </div>
        </div>
      </ag-tab-panel>

      <ag-tab-panel slot="panel" id="separator-code-panel">
        <div class="code-container">
          <pre><code class="language-html">{`<!-- Slash Separator -->
<ag-breadcrumb type="slash" id="breadcrumb-slash"></ag-breadcrumb>

<!-- Arrow Separator -->
<ag-breadcrumb type="arrow" id="breadcrumb-arrow"></ag-breadcrumb>

<script>
const separatorBreadcrumb = [
  { label: 'Docs', href: '/docs' },
  { label: 'Components', href: '/docs/components' },
  { label: 'Breadcrumb', current: true }
];

// Apply data to breadcrumbs
document.getElementById('breadcrumb-slash').items = separatorBreadcrumb;
document.getElementById('breadcrumb-arrow').items = separatorBreadcrumb;
</script>`}</code></pre>
        </div>
      </ag-tab-panel>
    </ag-tabs>
  </div>
</section>

<section>
  <h2>React Integration</h2>
  <p>
    The ReactBreadcrumb wrapper provides seamless integration with React applications
    while maintaining all the accessibility features of the underlying web component.
  </p>

  <div class="component-showcase">
    <ag-tabs activation="manual" active-tab="0" aria-label="React Integration example">
      <ag-tab slot="tab" panel="react-preview-panel">Preview</ag-tab>
      <ag-tab slot="tab" panel="react-code-panel">Code</ag-tab>

      <ag-tab-panel slot="panel" id="react-preview-panel">
        <div class="preview-container">
          <ReactBreadcrumbDemo client:only="react" />
        </div>
      </ag-tab-panel>

      <ag-tab-panel slot="panel" id="react-code-panel">
        <div class="code-container">
          <pre><code class="language-tsx">{`import { ReactBreadcrumb } from 'agnosticui-react';

const MyComponent = () => {
  const items = [
    { label: 'Home', href: '/' },
    { label: 'Products', href: '/products' },
    { label: 'Current Page', current: true }
  ];

  const handleBreadcrumbClick = (event) => {
    console.log('Breadcrumb clicked:', event.detail);
  };

  return (
    <ReactBreadcrumb
      items={items}
      type="chevron"
      onBreadcrumbClick={handleBreadcrumbClick}
    />
  );
};

export default MyComponent;`}</code></pre>
        </div>
      </ag-tab-panel>
    </ag-tabs>
  </div>
</section>

<section>
  <h2>Vue Integration</h2>
  <p>
    The VueBreadcrumb wrapper provides seamless integration with Vue 3 applications
    using the Composition API while maintaining all the accessibility features
    of the underlying web component.
  </p>

  <div class="component-showcase">
    <ag-tabs activation="manual" active-tab="0" aria-label="Vue Integration example">
      <ag-tab slot="tab" panel="vue-preview-panel">Preview</ag-tab>
      <ag-tab slot="tab" panel="vue-code-panel">Code</ag-tab>

      <ag-tab-panel slot="panel" id="vue-preview-panel">
        <div class="preview-container">
          <VueBreadcrumbDemo client:only="vue" />
        </div>
      </ag-tab-panel>

      <ag-tab-panel slot="panel" id="vue-code-panel">
        <div class="code-container">
          <pre><code class="language-html">{`<template>
  <VueBreadcrumb
    :items="items"
    type="slash"
    @breadcrumb-click="handleBreadcrumbClick"
  />
</template>

<script setup>
import { ref } from 'vue';
import { VueBreadcrumb } from 'agnosticui-vue';

const items = ref([
  { label: 'Home', href: '/' },
  { label: 'Categories', href: '/categories' },
  { label: 'Electronics', href: '/categories/electronics' },
  { label: 'Current Page', current: true }
]);

const handleBreadcrumbClick = (event) => {
  console.log('Breadcrumb clicked:', event.detail);
};
</script>`}</code></pre>
        </div>
      </ag-tab-panel>
    </ag-tabs>
  </div>
</section>

<section>
  <h2>Svelte Integration</h2>
  <p>
    AgnosticUI components work excellently with Svelte 5 using direct web component integration.
    This approach provides the best performance and reliability while maintaining full reactivity
    and all accessibility features.
  </p>

  <div class="component-showcase">
    <ag-tabs activation="manual" active-tab="0" aria-label="Svelte Integration example">
      <ag-tab slot="tab" panel="svelte-preview-panel">Preview</ag-tab>
      <ag-tab slot="tab" panel="svelte-code-panel">Code</ag-tab>

      <ag-tab-panel slot="panel" id="svelte-preview-panel">
        <div class="preview-container">
          <SvelteBreadcrumbDemo client:only="svelte" />
        </div>
      </ag-tab-panel>

      <ag-tab-panel slot="panel" id="svelte-code-panel">
        <div class="code-container">
          <pre><code class="language-html">{`<script>
  import 'agnosticui-core';
  import { onMount } from 'svelte';

  let breadcrumbRef;

  const items = [
    { label: 'Home', href: '/' },
    { label: 'Docs', href: '/docs' },
    { label: 'Components', href: '/docs/components' },
    { label: 'Current Page', current: true }
  ];

  onMount(() => {
    if (breadcrumbRef) {
      breadcrumbRef.items = items;

      breadcrumbRef.addEventListener('breadcrumb-click', (event) => {
        console.log('Breadcrumb clicked:', event.detail);
      });
    }
  });
</script>

<ag-breadcrumb bind:this={breadcrumbRef} type="arrow" />`}</code></pre>
        </div>
      </ag-tab-panel>
    </ag-tabs>
  </div>
</section>


<script>
  // Pure Lit Event Examples - Client-side only setup
  if (typeof window !== "undefined") {
    // Load agnosticui-core on client side
    import("agnosticui-core");

    document.addEventListener("DOMContentLoaded", () => {
      // Sample breadcrumb data
      const simpleBreadcrumb = [
        { label: 'Home', href: '/' },
        { label: 'Current Page', current: true }
      ];

      const complexBreadcrumb = [
        { label: 'Home', href: '/' },
        { label: 'Products', href: '/products' },
        { label: 'Electronics', href: '/products/electronics' },
        { label: 'Smartphones', href: '/products/electronics/smartphones' },
        { label: 'iPhone 15 Pro', current: true }
      ];

      const separatorBreadcrumb = [
        { label: 'Docs', href: '/docs' },
        { label: 'Components', href: '/docs/components' },
        { label: 'Breadcrumb', current: true }
      ];

      // Wait for web components to be defined
      const setupBreadcrumbs = async () => {
        await customElements.whenDefined('ag-breadcrumb');

        // Set up breadcrumb data
        const breadcrumbs = {
          'breadcrumb-1': simpleBreadcrumb,
          'breadcrumb-2': complexBreadcrumb,
          'breadcrumb-slash': separatorBreadcrumb,
          'breadcrumb-arrow': separatorBreadcrumb
        };

        // Apply data to breadcrumbs
        Object.entries(breadcrumbs).forEach(([id, items]) => {
          const element = document.getElementById(id) as any;
          if (element) {
            element.items = items;

            // Add event listeners
            element.addEventListener('breadcrumb-click', (event: any) => {
              const detail = event.detail;
              console.log(`üçû Breadcrumb clicked: "${detail.item.label}"`, {
                breadcrumbId: id,
                itemIndex: detail.index,
                itemData: detail.item,
                timestamp: new Date().toLocaleTimeString(),
                eventType: 'breadcrumb-click'
              });

              // Prevent navigation for demo purposes
              if (detail.item.href && detail.item.href.startsWith('/')) {
                detail.event.preventDefault();
                console.log('üö´ Navigation prevented for demo');
              }
            });
          }
        });

        console.log('‚úÖ Breadcrumb examples initialized');
      };

      setupBreadcrumbs();

      // Initialize syntax highlighting for tab content
      if (typeof window.initSyntaxHighlighting === 'function') {
        window.initSyntaxHighlighting();
      }
    });
  }
</script>