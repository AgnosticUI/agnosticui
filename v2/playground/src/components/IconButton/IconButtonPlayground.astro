---
import ReactIconButtonDemo from "../ReactIconButtonDemo.tsx";
import VueIconButtonDemo from "../VueIconButtonDemo.vue";
import SvelteIconButtonDemo from "../SvelteIconButtonDemo.svelte";
import { Home, X, Menu, Settings, Heart, Star, Download, Trash2, Edit3, Info, AlertCircle, CheckCircle, Save, Ban } from "lucide-astro";
---

<style is:global>
  body {
    margin: 0;
    padding: 0;
    background: var(--c-bg-secondary);
  }

  .nav-breadcrumb {
    margin-bottom: 1rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--c-border);
  }

  .nav-home {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--ag-text-secondary);
    font-size: 0.9rem;
    text-decoration: none;
    transition: color 0.2s ease;
  }

  .nav-home:hover {
    color: var(--ag-primary);
  }

  .nav-home svg {
    width: 1.25rem;
    height: 1.25rem;
  }

  h1,
  h2 {
    margin: 1rem 0;
  }


  .icon-button-examples {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    margin: 1rem 0;
    align-items: center;
  }

  .icon-button-group {
    display: flex;
    gap: 0.5rem;
    align-items: center;
  }

  .demo-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 1rem;
    margin: 1rem 0;
  }

  .demo-card {
    padding: 1rem;
    border: 1px solid var(--c-border);
    border-radius: 8px;
    background: var(--c-card-bg);
    text-align: center;
  }

  .demo-card h4 {
    margin: 0 0 0.5rem 0;
    font-size: 0.875rem;
    color: var(--ag-text-secondary);
  }

  .feature-list {
    list-style: none;
    padding: 0;
  }

  .feature-list li {
    padding: 0.25rem 0;
    color: var(--ag-text-secondary);
  }

  .feature-list li:before {
    content: "âœ“";
    color: var(--ag-primary);
    font-weight: bold;
    margin-right: 0.5rem;
  }


  .pressed-indicator {
    font-size: 0.75rem;
    color: var(--ag-primary);
    margin-left: 0.5rem;
    opacity: 0;
    transition: opacity 0.2s ease;
  }

  .pressed-indicator.active {
    opacity: 1;
  }

  /* IconButton theming - fix dark mode contrast issues */
  ag-icon-button {
    /* Map missing --ag-text token to our semantic token */
    --ag-text: var(--ag-text-primary);
    --ag-background-secondary: var(--ag-background-secondary);
    --ag-background-tertiary: var(--ag-background-tertiary);
    --ag-primary: var(--ag-primary);
    --ag-primary-subtle: var(--ag-primary-subtle);
    --ag-focus: var(--ag-focus);
    --ag-focus-width: var(--ag-focus-width);
    --ag-focus-offset: var(--ag-focus-offset);
    --ag-opacity-disabled: var(--ag-opacity-disabled);
    --ag-motion-duration-fast: var(--ag-motion-duration-fast);
    --ag-radius-sm: var(--ag-radius-sm);

    /* Override IconButton-specific hover/active states for proper contrast */
    --icon-button-color: var(--ag-text-primary);
    --icon-button-bg: transparent;
    --icon-button-hover-bg: var(--ag-background-tertiary);
    --icon-button-hover-color: var(--ag-text-locked);
    --icon-button-active-bg: var(--ag-background-tertiary);
    --icon-button-pressed-bg: var(--ag-primary);
    --icon-button-pressed-color: var(--ag-on-primary);
  }

  /* Fix low contrast ghost icons - make them darker */
  ag-icon-button[variant="ghost"],
  ag-icon-button:not([variant]) {
    --icon-button-color: var(--ag-text-primary);
  }

  /* Custom colors for favorite buttons when active/pressed across all framework sections */
  /* Use CSS custom properties that will penetrate Shadow DOM */

  /* Heart - red when pressed */
  .favorite-heart ag-icon-button,
  .favorite-heart react-icon-button,
  .favorite-heart vue-icon-button {
    --icon-button-pressed-bg: #dc2626;
    --icon-button-pressed-color: #ffffff;
  }

  /* Star - yellow when pressed */
  .favorite-star ag-icon-button,
  .favorite-star react-icon-button,
  .favorite-star vue-icon-button {
    --icon-button-pressed-bg: #f59e0b;
    --icon-button-pressed-color: #000000;
  }

  /* Bookmark - blue when pressed */
  .favorite-bookmark ag-icon-button,
  .favorite-bookmark react-icon-button,
  .favorite-bookmark vue-icon-button {
    --icon-button-pressed-bg: #2563eb;
    --icon-button-pressed-color: #ffffff;
  }

  /* Fix Action Log Clear button text contrast on dark backgrounds */
  .clear-button {
    color: var(--ag-text-primary);
    background: var(--ag-background-secondary);
    border-color: var(--ag-border-primary);
  }

  .clear-button:hover:not(:disabled) {
    background: var(--ag-background-tertiary);
  }
</style>

<div class="nav-breadcrumb">
  <a href="/" class="nav-home">
    <Home />
    <span>Back to Components</span>
  </a>
</div>

<h1>IconButton Playground</h1>

<section>
  <h2>Core IconButton Component</h2>
  <p>
    This demonstrates the core AgnosticUI IconButton component with full
    accessibility features and APG compliance. IconButtons are designed for
    actions that can be represented by a single icon or symbol.
  </p>

  <div class="component-showcase">
    <ag-tabs activation="manual" active-tab="0" aria-label="Core IconButton Component example">
      <ag-tab slot="tab" panel="core-preview-panel">Preview</ag-tab>
      <ag-tab slot="tab" panel="core-code-panel">Code</ag-tab>

      <ag-tab-panel slot="panel" id="core-preview-panel">
        <div class="preview-container">
          <div class="icon-button-examples">
            <ag-icon-button label="Close">
              <X width="24" height="24" />
            </ag-icon-button>
            <ag-icon-button label="Menu">
              <Menu width="24" height="24" />
            </ag-icon-button>
            <ag-icon-button label="Settings">
              <Settings width="24" height="24" />
            </ag-icon-button>
            <ag-icon-button label="Heart">
              <Heart width="24" height="24" />
            </ag-icon-button>
            <ag-icon-button label="Star">
              <Star width="24" height="24" />
            </ag-icon-button>
          </div>

          <ul class="feature-list">
            <li>Semantic button element foundation</li>
            <li>Space/Enter keyboard activation</li>
            <li>Almost headless styling approach</li>
            <li>APG-compliant accessibility with proper ARIA labeling</li>
            <li>Support for Unicode symbols and custom SVG icons</li>
          </ul>
        </div>
      </ag-tab-panel>

      <ag-tab-panel slot="panel" id="core-code-panel">
        <div class="code-container">
          <pre><code class="language-html">{`<!-- Core IconButton examples -->
<ag-icon-button label="Close">
  <svg width="24" height="24"><!-- X icon --></svg>
</ag-icon-button>

<ag-icon-button label="Menu">
  <svg width="24" height="24"><!-- Menu icon --></svg>
</ag-icon-button>

<ag-icon-button label="Settings">
  <svg width="24" height="24"><!-- Settings icon --></svg>
</ag-icon-button>

<ag-icon-button label="Heart">
  <svg width="24" height="24"><!-- Heart icon --></svg>
</ag-icon-button>

<ag-icon-button label="Star">
  <svg width="24" height="24"><!-- Star icon --></svg>
</ag-icon-button>`}</code></pre>
        </div>
      </ag-tab-panel>
    </ag-tabs>
  </div>
</section>

<section>
  <h2>Visual Variants</h2>
  <p>
    IconButtons support different visual variants to match your design system
    and indicate different action types.
  </p>

  <div class="component-showcase">
    <ag-tabs activation="manual" active-tab="0" aria-label="Visual Variants example">
      <ag-tab slot="tab" panel="variants-preview-panel">Preview</ag-tab>
      <ag-tab slot="tab" panel="variants-code-panel">Code</ag-tab>

      <ag-tab-panel slot="panel" id="variants-preview-panel">
        <div class="preview-container">
          <div class="demo-grid">
            <div class="demo-card">
              <h4>Ghost (Default)</h4>
              <ag-icon-button label="Settings" variant="ghost">
                <Settings width="24" height="24" />
              </ag-icon-button>
            </div>
            <div class="demo-card">
              <h4>Primary</h4>
              <ag-icon-button label="Save" variant="primary">
                <Save width="24" height="24" />
              </ag-icon-button>
            </div>
            <div class="demo-card">
              <h4>Secondary</h4>
              <ag-icon-button label="Edit" variant="secondary">
                <Edit3 width="24" height="24" />
              </ag-icon-button>
            </div>
            <div class="demo-card">
              <h4>Danger</h4>
              <ag-icon-button label="Delete" variant="danger">
                <Trash2 width="24" height="24" />
              </ag-icon-button>
            </div>
          </div>
        </div>
      </ag-tab-panel>

      <ag-tab-panel slot="panel" id="variants-code-panel">
        <div class="code-container">
          <pre><code class="language-html">{`<!-- Ghost (Default) variant -->
<ag-icon-button label="Settings" variant="ghost">
  <svg width="24" height="24"><!-- Settings icon --></svg>
</ag-icon-button>

<!-- Primary variant -->
<ag-icon-button label="Save" variant="primary">
  <svg width="24" height="24"><!-- Save icon --></svg>
</ag-icon-button>

<!-- Secondary variant -->
<ag-icon-button label="Edit" variant="secondary">
  <svg width="24" height="24"><!-- Edit icon --></svg>
</ag-icon-button>

<!-- Danger variant -->
<ag-icon-button label="Delete" variant="danger">
  <svg width="24" height="24"><!-- Trash icon --></svg>
</ag-icon-button>`}</code></pre>
        </div>
      </ag-tab-panel>
    </ag-tabs>
  </div>
</section>

<section>
  <h2>Size Variants</h2>
  <p>IconButtons support different sizes to fit various UI contexts.</p>

  <div class="component-showcase">
    <ag-tabs activation="manual" active-tab="0" aria-label="Size Variants example">
      <ag-tab slot="tab" panel="sizes-preview-panel">Preview</ag-tab>
      <ag-tab slot="tab" panel="sizes-code-panel">Code</ag-tab>

      <ag-tab-panel slot="panel" id="sizes-preview-panel">
        <div class="preview-container">
          <div class="icon-button-examples">
            <ag-icon-button label="Extra small close" size="xs">
              <X width="16" height="16" />
            </ag-icon-button>
            <ag-icon-button label="Small close" size="sm">
              <X width="18" height="18" />
            </ag-icon-button>
            <ag-icon-button label="Medium close" size="md">
              <X width="24" height="24" />
            </ag-icon-button>
            <ag-icon-button label="Large close" size="lg">
              <X width="32" height="32" />
            </ag-icon-button>
            <ag-icon-button label="Extra large close" size="xl">
              <X width="36" height="36" />
            </ag-icon-button>
          </div>
        </div>
      </ag-tab-panel>

      <ag-tab-panel slot="panel" id="sizes-code-panel">
        <div class="code-container">
          <pre><code class="language-html">{`<!-- Size variants -->
<ag-icon-button label="Extra small close" size="xs">
  <svg width="16" height="16"><!-- X icon --></svg>
</ag-icon-button>

<ag-icon-button label="Small close" size="sm">
  <svg width="18" height="18"><!-- X icon --></svg>
</ag-icon-button>

<ag-icon-button label="Medium close" size="md">
  <svg width="24" height="24"><!-- X icon --></svg>
</ag-icon-button>

<ag-icon-button label="Large close" size="lg">
  <svg width="32" height="32"><!-- X icon --></svg>
</ag-icon-button>

<ag-icon-button label="Extra large close" size="xl">
  <svg width="36" height="36"><!-- X icon --></svg>
</ag-icon-button>`}</code></pre>
        </div>
      </ag-tab-panel>
    </ag-tabs>
  </div>
</section>

<section>
  <h2>Custom SVG Icons</h2>
  <p>
    IconButtons can contain custom SVG icons for more sophisticated graphics
    while maintaining accessibility.
  </p>

  <div class="component-showcase">
    <ag-tabs activation="manual" active-tab="0" aria-label="Custom SVG Icons example">
      <ag-tab slot="tab" panel="svg-preview-panel">Preview</ag-tab>
      <ag-tab slot="tab" panel="svg-code-panel">Code</ag-tab>

      <ag-tab-panel slot="panel" id="svg-preview-panel">
        <div class="preview-container">
          <div class="icon-button-examples">
            <ag-icon-button label="Close dialog" variant="ghost">
              <X width="24" height="24" />
            </ag-icon-button>
            <ag-icon-button label="Open menu" variant="secondary">
              <Menu width="24" height="24" />
            </ag-icon-button>
            <ag-icon-button label="Settings" variant="primary">
              <Settings width="24" height="24" />
            </ag-icon-button>
            <ag-icon-button label="Download" variant="secondary">
              <Download width="24" height="24" />
            </ag-icon-button>
            <ag-icon-button label="Delete item" variant="danger">
              <Trash2 width="24" height="24" />
            </ag-icon-button>
          </div>
        </div>
      </ag-tab-panel>

      <ag-tab-panel slot="panel" id="svg-code-panel">
        <div class="code-container">
          <pre><code class="language-html">{`<!-- Custom SVG Icons -->
<ag-icon-button label="Close dialog" variant="ghost">
  <svg width="24" height="24" viewBox="0 0 24 24">
    <path d="M6 6l12 12M6 18L18 6" stroke="currentColor" stroke-width="2"/>
  </svg>
</ag-icon-button>

<ag-icon-button label="Open menu" variant="secondary">
  <svg width="24" height="24" viewBox="0 0 24 24">
    <path d="M3 6h18M3 12h18M3 18h18" stroke="currentColor" stroke-width="2"/>
  </svg>
</ag-icon-button>

<ag-icon-button label="Settings" variant="primary">
  <svg width="24" height="24" viewBox="0 0 24 24">
    <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
    <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33..." stroke="currentColor" stroke-width="2"/>
  </svg>
</ag-icon-button>`}</code></pre>
        </div>
      </ag-tab-panel>
    </ag-tabs>
  </div>
</section>

<section>
  <h2>Button States</h2>
  <p>
    IconButtons support disabled, loading, and pressed states with proper ARIA attributes.
  </p>

  <div class="component-showcase">
    <ag-tabs activation="manual" active-tab="0" aria-label="Button States example">
      <ag-tab slot="tab" panel="states-preview-panel">Preview</ag-tab>
      <ag-tab slot="tab" panel="states-code-panel">Code</ag-tab>

      <ag-tab-panel slot="panel" id="states-preview-panel">
        <div class="preview-container">
          <div class="icon-button-examples">
            <ag-icon-button label="Disabled button" disabled>
              <Ban width="24" height="24" />
            </ag-icon-button>
            <ag-icon-button label="Toggle pressed" pressed="true" variant="secondary">
              <Star width="24" height="24" />
            </ag-icon-button>
          </div>
        </div>
      </ag-tab-panel>

      <ag-tab-panel slot="panel" id="states-code-panel">
        <div class="code-container">
          <pre><code class="language-html">{`<!-- Disabled state -->
<ag-icon-button label="Disabled button" disabled>
  <svg width="24" height="24"><!-- Ban icon --></svg>
</ag-icon-button>

<!-- Pressed/Toggle state -->
<ag-icon-button label="Toggle pressed" pressed="true" variant="secondary">
  <svg width="24" height="24"><!-- Star icon --></svg>
</ag-icon-button>

<!-- Loading state (when supported) -->
<ag-icon-button label="Loading" loading>
  <svg width="24" height="24"><!-- Loading spinner --></svg>
</ag-icon-button>`}</code></pre>
        </div>
      </ag-tab-panel>
    </ag-tabs>
  </div>
</section>

<section>
  <h2>React Integration</h2>
  <p>
    The ReactIconButton wrapper provides seamless integration with React
    applications while maintaining all the accessibility features of the
    underlying web component.
  </p>

  <div class="component-showcase">
    <ag-tabs activation="manual" active-tab="0" aria-label="React Integration example">
      <ag-tab slot="tab" panel="react-preview-panel">Preview</ag-tab>
      <ag-tab slot="tab" panel="react-code-panel">Code</ag-tab>

      <ag-tab-panel slot="panel" id="react-preview-panel">
        <div class="preview-container">
          <ReactIconButtonDemo client:only="react" />
        </div>
      </ag-tab-panel>

      <ag-tab-panel slot="panel" id="react-code-panel">
        <div class="code-container">
          <pre><code class="language-tsx">{`import { ReactIconButton } from 'agnosticui-react';
import { useState } from 'react';

const MyComponent = () => {
  const [isPressed, setIsPressed] = useState(false);

  const handleToggle = () => {
    setIsPressed(!isPressed);
    console.log('Button toggled:', !isPressed);
  };

  return (
    <div>
      {/* Basic icon button */}
      <ReactIconButton label="Close" variant="ghost">
        <svg width="24" height="24">
          <path d="M6 6l12 12M6 18L18 6" stroke="currentColor" stroke-width="2"/>
        </svg>
      </ReactIconButton>

      {/* Toggle button with state */}
      <ReactIconButton
        label="Toggle favorite"
        variant="secondary"
        pressed={isPressed}
        onClick={handleToggle}
      >
        <svg width="24" height="24">
          <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"
                fill={isPressed ? 'currentColor' : 'none'}
                stroke="currentColor"
                stroke-width="2"/>
        </svg>
      </ReactIconButton>
    </div>
  );
};

export default MyComponent;`}</code></pre>
        </div>
      </ag-tab-panel>
    </ag-tabs>
  </div>
</section>

<section>
  <h2>Vue Integration</h2>
  <p>
    The VueIconButton wrapper provides seamless integration with Vue 3 applications
    using the Composition API while maintaining all the accessibility features
    of the underlying web component.
  </p>

  <div class="component-showcase">
    <ag-tabs activation="manual" active-tab="0" aria-label="Vue Integration example">
      <ag-tab slot="tab" panel="vue-preview-panel">Preview</ag-tab>
      <ag-tab slot="tab" panel="vue-code-panel">Code</ag-tab>

      <ag-tab-panel slot="panel" id="vue-preview-panel">
        <div class="preview-container">
          <VueIconButtonDemo client:only="vue" />
        </div>
      </ag-tab-panel>

      <ag-tab-panel slot="panel" id="vue-code-panel">
        <div class="code-container">
          <pre><code class="language-html">{`<template>
  <div>
    <!-- Basic icon button -->
    <VueIconButton label="Close" variant="ghost">
      <svg width="24" height="24">
        <path d="M6 6l12 12M6 18L18 6" stroke="currentColor" stroke-width="2"/>
      </svg>
    </VueIconButton>

    <!-- Toggle button with state -->
    <VueIconButton
      label="Toggle favorite"
      variant="secondary"
      :pressed="isPressed"
      @click="handleToggle"
    >
      <svg width="24" height="24">
        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"
              :fill="isPressed ? 'currentColor' : 'none'"
              stroke="currentColor"
              stroke-width="2"/>
      </svg>
    </VueIconButton>
  </div>
</template>

<script setup>
import { ref } from 'vue';
import { VueIconButton } from 'agnosticui-vue';

const isPressed = ref(false);

const handleToggle = () => {
  isPressed.value = !isPressed.value;
  console.log('Button toggled:', isPressed.value);
};
</script>`}</code></pre>
        </div>
      </ag-tab-panel>
    </ag-tabs>
  </div>
</section>

<section>
  <h2>Svelte Integration</h2>
  <p>
    AgnosticUI IconButton components work excellently with Svelte using direct web component integration.
    This approach provides the best performance and reliability while maintaining full reactivity
    and all accessibility features.
  </p>

  <div class="component-showcase">
    <ag-tabs activation="manual" active-tab="0" aria-label="Svelte Integration example">
      <ag-tab slot="tab" panel="svelte-preview-panel">Preview</ag-tab>
      <ag-tab slot="tab" panel="svelte-code-panel">Code</ag-tab>

      <ag-tab-panel slot="panel" id="svelte-preview-panel">
        <div class="preview-container">
          <SvelteIconButtonDemo client:only="svelte" />
        </div>
      </ag-tab-panel>

      <ag-tab-panel slot="panel" id="svelte-code-panel">
        <div class="code-container">
          <pre><code class="language-html">{`<script>
  import 'agnosticui-core';
  import { onMount } from 'svelte';

  let isPressed = false;

  const handleToggle = () => {
    isPressed = !isPressed;
    console.log('Button toggled:', isPressed);
  };
</script>

<!-- Basic icon button -->
<ag-icon-button label="Close" variant="ghost">
  <svg width="24" height="24">
    <path d="M6 6l12 12M6 18L18 6" stroke="currentColor" stroke-width="2"/>
  </svg>
</ag-icon-button>

<!-- Toggle button with state -->
<ag-icon-button
  label="Toggle favorite"
  variant="secondary"
  pressed={isPressed}
  on:click={handleToggle}
>
  <svg width="24" height="24">
    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"
          fill={isPressed ? 'currentColor' : 'none'}
          stroke="currentColor"
          stroke-width="2"/>
  </svg>
</ag-icon-button>`}</code></pre>
        </div>
      </ag-tab-panel>
    </ag-tabs>
  </div>
</section>

<script>
  document.addEventListener("DOMContentLoaded", async () => {
    try {
      // Import the IconButton component
      await import("agnosticui-core");

      // Wait for the custom element to be defined
      await customElements.whenDefined("ag-icon-button");

      // Initialize syntax highlighting for tab content
      if (typeof window.initSyntaxHighlighting === 'function') {
        window.initSyntaxHighlighting();
      }
    } catch (error) {
      console.error("Error loading icon button component:", error);
    }
  });
</script>