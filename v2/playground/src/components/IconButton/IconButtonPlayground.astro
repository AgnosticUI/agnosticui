---
import ReactIconButtonDemo from "../ReactIconButtonDemo.tsx";
import VueIconButtonDemo from "../VueIconButtonDemo.vue";
import SvelteIconButtonDemo from "../SvelteIconButtonDemo.svelte";
import { Home, X, Menu, Settings, Heart, Star, Download, Trash2, Edit3, Info, AlertCircle, CheckCircle, Save, Ban } from "lucide-astro";
---

<style is:global>
  body {
    margin: 0;
    padding: 0;
    background: var(--c-bg-secondary);
  }

  .nav-breadcrumb {
    margin-bottom: 1rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--c-border);
  }

  .nav-home {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--ag-text-secondary);
    font-size: 0.9rem;
    text-decoration: none;
    transition: color 0.2s ease;
  }

  .nav-home:hover {
    color: var(--ag-primary);
  }

  .nav-home svg {
    width: 1.25rem;
    height: 1.25rem;
  }

  h1,
  h2 {
    margin: 1rem 0;
  }

  section {
    margin: 2rem 0;
    padding: 1rem;
    border: 1px solid var(--c-border);
    border-radius: 8px;
    text-align: left;
  }

  .icon-button-examples {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    margin: 1rem 0;
    align-items: center;
  }

  .icon-button-group {
    display: flex;
    gap: 0.5rem;
    align-items: center;
  }

  .demo-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 1rem;
    margin: 1rem 0;
  }

  .demo-card {
    padding: 1rem;
    border: 1px solid var(--c-border);
    border-radius: 8px;
    background: var(--c-card-bg);
    text-align: center;
  }

  .demo-card h4 {
    margin: 0 0 0.5rem 0;
    font-size: 0.875rem;
    color: var(--ag-text-secondary);
  }

  .feature-list {
    list-style: none;
    padding: 0;
  }

  .feature-list li {
    padding: 0.25rem 0;
    color: var(--ag-text-secondary);
  }

  .feature-list li:before {
    content: "âœ“";
    color: var(--ag-primary);
    font-weight: bold;
    margin-right: 0.5rem;
  }

  .code-example {
    background: var(--ag-background-secondary);
    color: var(--ag-text-primary);
    padding: 1rem;
    border-radius: 8px;
    font-family: "Monaco", "Menlo", monospace;
    font-size: 0.875rem;
    margin: 1rem 0;
    overflow-x: auto;
  }

  .pressed-indicator {
    font-size: 0.75rem;
    color: var(--ag-primary);
    margin-left: 0.5rem;
    opacity: 0;
    transition: opacity 0.2s ease;
  }

  .pressed-indicator.active {
    opacity: 1;
  }

  /* IconButton theming - fix dark mode contrast issues */
  ag-icon-button {
    /* Map missing --ag-text token to our semantic token */
    --ag-text: var(--ag-text-primary);
    --ag-background-secondary: var(--ag-background-secondary);
    --ag-background-tertiary: var(--ag-background-tertiary);
    --ag-primary: var(--ag-primary);
    --ag-primary-subtle: var(--ag-primary-subtle);
    --ag-focus: var(--ag-focus);
    --ag-focus-width: var(--ag-focus-width);
    --ag-focus-offset: var(--ag-focus-offset);
    --ag-opacity-disabled: var(--ag-opacity-disabled);
    --ag-motion-duration-fast: var(--ag-motion-duration-fast);
    --ag-radius-sm: var(--ag-radius-sm);

    /* Override IconButton-specific hover/active states for proper contrast */
    --icon-button-color: var(--ag-text-primary);
    --icon-button-bg: transparent;
    --icon-button-hover-bg: var(--ag-background-tertiary);
    --icon-button-hover-color: var(--ag-text-locked);
    --icon-button-active-bg: var(--ag-background-tertiary);
    --icon-button-pressed-bg: var(--ag-primary);
    --icon-button-pressed-color: var(--ag-on-primary);
  }

  /* Fix low contrast ghost icons - make them darker */
  ag-icon-button[variant="ghost"],
  ag-icon-button:not([variant]) {
    --icon-button-color: var(--ag-text-primary);
  }

  /* Custom colors for favorite buttons when active/pressed across all framework sections */
  /* Use CSS custom properties that will penetrate Shadow DOM */

  /* Heart - red when pressed */
  .favorite-heart ag-icon-button,
  .favorite-heart react-icon-button,
  .favorite-heart vue-icon-button {
    --icon-button-pressed-bg: #dc2626;
    --icon-button-pressed-color: #ffffff;
  }

  /* Star - yellow when pressed */
  .favorite-star ag-icon-button,
  .favorite-star react-icon-button,
  .favorite-star vue-icon-button {
    --icon-button-pressed-bg: #f59e0b;
    --icon-button-pressed-color: #000000;
  }

  /* Bookmark - blue when pressed */
  .favorite-bookmark ag-icon-button,
  .favorite-bookmark react-icon-button,
  .favorite-bookmark vue-icon-button {
    --icon-button-pressed-bg: #2563eb;
    --icon-button-pressed-color: #ffffff;
  }

  /* Fix Action Log Clear button text contrast on dark backgrounds */
  .clear-button {
    color: var(--ag-text-primary);
    background: var(--ag-background-secondary);
    border-color: var(--ag-border-primary);
  }

  .clear-button:hover:not(:disabled) {
    background: var(--ag-background-tertiary);
  }
</style>

<div class="nav-breadcrumb">
  <a href="/" class="nav-home">
    <Home />
    <span>Back to Components</span>
  </a>
</div>

<h1>IconButton Playground</h1>

<section>
  <h2>Core IconButton Component</h2>
  <p>
    This demonstrates the core AgnosticUI IconButton component with full
    accessibility features and APG compliance. IconButtons are designed for
    actions that can be represented by a single icon or symbol.
  </p>

  <div class="icon-button-examples">
    <ag-icon-button label="Close">
      <X width="24" height="24" />
    </ag-icon-button>
    <ag-icon-button label="Menu">
      <Menu width="24" height="24" />
    </ag-icon-button>
    <ag-icon-button label="Settings">
      <Settings width="24" height="24" />
    </ag-icon-button>
    <ag-icon-button label="Heart">
      <Heart width="24" height="24" />
    </ag-icon-button>
    <ag-icon-button label="Star">
      <Star width="24" height="24" />
    </ag-icon-button>
  </div>

  <ul class="feature-list">
    <li>Semantic button element foundation</li>
    <li>Space/Enter keyboard activation</li>
    <li>Almost headless styling approach</li>
    <li>APG-compliant accessibility with proper ARIA labeling</li>
    <li>Support for Unicode symbols and custom SVG icons</li>
  </ul>
</section>

<section>
  <h2>Visual Variants</h2>
  <p>
    IconButtons support different visual variants to match your design system
    and indicate different action types.
  </p>

  <div class="demo-grid">
    <div class="demo-card">
      <h4>Ghost (Default)</h4>
      <ag-icon-button label="Settings" variant="ghost">
        <Settings width="24" height="24" />
      </ag-icon-button>
    </div>
    <div class="demo-card">
      <h4>Primary</h4>
      <ag-icon-button label="Save" variant="primary">
        <Save width="24" height="24" />
      </ag-icon-button>
    </div>
    <div class="demo-card">
      <h4>Secondary</h4>
      <ag-icon-button label="Edit" variant="secondary">
        <Edit3 width="24" height="24" />
      </ag-icon-button>
    </div>
    <div class="demo-card">
      <h4>Danger</h4>
      <ag-icon-button label="Delete" variant="danger">
        <Trash2 width="24" height="24" />
      </ag-icon-button>
    </div>
  </div>

  <div class="code-example">
&lt;ag-icon-button label="Settings" unicode="âš™" variant="ghost"&gt;&lt;/ag-icon-button&gt;
&lt;ag-icon-button label="Save" unicode="ðŸ’¾" variant="primary"&gt;&lt;/ag-icon-button&gt;
&lt;ag-icon-button label="Edit" unicode="âœŽ" variant="secondary"&gt;&lt;/ag-icon-button&gt;
&lt;ag-icon-button label="Delete" unicode="ðŸ—‘" variant="danger"&gt;&lt;/ag-icon-button&gt;
  </div>
</section>

<section>
  <h2>Size Variants</h2>
  <p>IconButtons support different sizes to fit various UI contexts.</p>

  <div class="icon-button-examples">
    <ag-icon-button label="Extra small close" size="xs">
      <X width="16" height="16" />
    </ag-icon-button>
    <ag-icon-button label="Small close" size="sm">
      <X width="18" height="18" />
    </ag-icon-button>
    <ag-icon-button label="Medium close" size="md">
      <X width="24" height="24" />
    </ag-icon-button>
    <ag-icon-button label="Large close" size="lg">
      <X width="32" height="32" />
    </ag-icon-button>
    <ag-icon-button label="Extra large close" size="xl">
      <X width="36" height="36" />
    </ag-icon-button>
  </div>

  <div class="code-example">
&lt;ag-icon-button label="Close" unicode="Ã—" size="xs"&gt;&lt;/ag-icon-button&gt;
&lt;ag-icon-button label="Close" unicode="Ã—" size="sm"&gt;&lt;/ag-icon-button&gt;
&lt;ag-icon-button label="Close" unicode="Ã—" size="md"&gt;&lt;/ag-icon-button&gt;
&lt;ag-icon-button label="Close" unicode="Ã—" size="lg"&gt;&lt;/ag-icon-button&gt;
&lt;ag-icon-button label="Close" unicode="Ã—" size="xl"&gt;&lt;/ag-icon-button&gt;
  </div>
</section>

<section>
  <h2>Custom SVG Icons</h2>
  <p>
    IconButtons can contain custom SVG icons for more sophisticated graphics
    while maintaining accessibility.
  </p>

  <div class="icon-button-examples">
    <ag-icon-button label="Close dialog" variant="ghost">
      <X width="24" height="24" />
    </ag-icon-button>
    <ag-icon-button label="Open menu" variant="secondary">
      <Menu width="24" height="24" />
    </ag-icon-button>
    <ag-icon-button label="Settings" variant="primary">
      <Settings width="24" height="24" />
    </ag-icon-button>
    <ag-icon-button label="Download" variant="secondary">
      <Download width="24" height="24" />
    </ag-icon-button>
    <ag-icon-button label="Delete item" variant="danger">
      <Trash2 width="24" height="24" />
    </ag-icon-button>
  </div>

  <div class="code-example">
&lt;ag-icon-button label="Close dialog"&gt;
  &lt;svg&gt;...&lt;/svg&gt;
&lt;/ag-icon-button&gt;
  </div>
</section>

<section>
  <h2>Button States</h2>
  <p>
    IconButtons support disabled, loading, and pressed states with proper ARIA attributes.
  </p>

  <div class="icon-button-examples">
    <ag-icon-button label="Disabled button" disabled>
      <Ban width="24" height="24" />
    </ag-icon-button>
    <ag-icon-button label="Toggle pressed" pressed="true" variant="secondary">
      <Star width="24" height="24" />
    </ag-icon-button>
  </div>

  <div class="code-example">
&lt;ag-icon-button label="Disabled" unicode="ðŸš«" disabled&gt;&lt;/ag-icon-button&gt;
&lt;ag-icon-button label="Loading" unicode="âŸ³" loading&gt;&lt;/ag-icon-button&gt;
&lt;ag-icon-button label="Toggle" unicode="â˜…" pressed="true"&gt;&lt;/ag-icon-button&gt;
  </div>
</section>

<section>
  <h2>React Integration</h2>
  <p>
    The ReactIconButton wrapper provides seamless integration with React
    applications while maintaining all the accessibility features of the
    underlying web component.
  </p>
  <ReactIconButtonDemo client:only="react" />
</section>

<section>
  <h2>Vue Integration</h2>
  <p>
    The VueIconButton wrapper provides seamless integration with Vue 3 applications
    using the Composition API while maintaining all the accessibility features
    of the underlying web component.
  </p>
  <VueIconButtonDemo client:only="vue" />
</section>

<section>
  <h2>Svelte Integration</h2>
  <p>
    AgnosticUI IconButton components work excellently with Svelte using direct web component integration.
    This approach provides the best performance and reliability while maintaining full reactivity
    and all accessibility features.
  </p>
  <SvelteIconButtonDemo client:only="svelte" />
</section>

<section>
  <h2>Installation &amp; Usage</h2>
  <p>Get started with the IconButton component in your project.</p>

  <div class="code-example">
# Install AgnosticUI
npm install agnosticui

# Import the icon button component
import 'agnosticui/lib/src/components/IconButton/core/_IconButton.ts';

# Or eject for customization
agui eject icon-button ./src/components/ui/
  </div>
</section>

<script>
  if (typeof window !== "undefined") {
    import("agnosticui-core");
  }
</script>