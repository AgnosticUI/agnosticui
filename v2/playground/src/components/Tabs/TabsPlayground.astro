---
import { Home, Users, Settings, HelpCircle } from "lucide-astro";
import ReactTabsDemo from "../ReactTabsDemo.tsx";
import VueTabsDemo from "../VueTabsDemo.vue";
import SvelteTabsDemo from "../SvelteTabsDemo.svelte";
---

<style is:global>
  .nav-breadcrumb {
    margin-bottom: 1rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--c-border);
  }

  .nav-home {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--c-text-light);
    font-size: 0.9rem;
    text-decoration: none;
    transition: color 0.2s ease;
  }

  .nav-home:hover {
    color: var(--ag-primary);
  }

  .nav-home svg {
    width: 1.25rem;
    height: 1.25rem;
  }

  /* AgnosticUI Tabs Styling */
  ag-tabs {
    --ag-tabs-border: var(--c-border);
    --ag-tabs-border-active: var(--ag-primary);
    --ag-tabs-bg: transparent;
    --ag-tabs-bg-hover: var(--c-bg-secondary);
    --ag-tabs-bg-active: var(--c-card-bg);
    --ag-tabs-text: var(--c-text-light);
    --ag-tabs-text-hover: var(--c-text);
    --ag-tabs-text-active: var(--ag-primary);
    --ag-tabs-spacing: 0.5rem;
    --ag-tabs-panel-padding: 1.5rem;
  }

  ag-tab {
    cursor: pointer;
    transition: all 0.2s ease;
  }

  ag-tab:not([disabled]):not([aria-disabled="true"]):hover {
    background: var(--ag-tabs-bg-hover);
  }

  /* Disabled state - ensure visual affordance */
  ag-tab[disabled],
  ag-tab[aria-disabled="true"] {
    opacity: 0.6 !important;
    cursor: not-allowed !important;
    pointer-events: none !important;
  }

  ag-tab[aria-selected="true"] {
    color: var(--ag-tabs-text-active);
    border-bottom-color: var(--ag-tabs-border-active);
  }

  ag-tab:focus-visible {
    outline: 2px solid var(--ag-focus);
    outline-offset: 2px;
  }

  ag-tab-panel {
    background: var(--c-card-bg);
    border: 1px solid var(--c-border);
    border-radius: 0.5rem;
    margin-top: 1rem;
  }

  /* Demo-specific styling */
  .tabs-demo {
    margin: 2rem 0;
    padding: 1.5rem;
    background: var(--c-card-bg);
    border: 1px solid var(--c-border);
    border-radius: 0.5rem;
  }

  .demo-content {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-size: 0.95rem;
  }

  .demo-content svg {
    width: 1.25rem;
    height: 1.25rem;
    color: var(--ag-primary);
  }

  .keyboard-hints {
    background: var(--c-bg-secondary);
    border: 1px solid var(--c-border);
    border-radius: 0.375rem;
    padding: 1rem;
    margin: 1rem 0;
    font-size: 0.9rem;
    color: var(--c-text-light);
  }

  .keyboard-hints h4 {
    margin: 0 0 0.5rem 0;
    color: var(--c-text);
    font-size: 0.95rem;
  }

  .keyboard-hints code {
    background: var(--c-card-bg);
    padding: 0.125rem 0.25rem;
    border-radius: 0.25rem;
    font-family: 'SF Mono', Monaco, monospace;
    font-size: 0.85rem;
  }
</style>

<div>
  <nav class="nav-breadcrumb">
    <a href="/" class="nav-home">
      <Home />
      <span>Home</span>
    </a>
    / Tabs
  </nav>

  <h1>Tabs Component</h1>
  <p>ARIA-compliant tabs component with keyboard navigation and multi-framework support.</p>

  <div class="keyboard-hints">
    <h4>Keyboard Navigation</h4>
    <p>
      • <code>Arrow Keys</code> - Move focus between tabs<br/>
      • <code>Home</code> - Focus first tab<br/>
      • <code>End</code> - Focus last tab<br/>
      • <code>Space/Enter</code> - Activate focused tab (manual mode)<br/>
      • <code>Tab</code> - Move focus to tab panel content
    </p>
  </div>

  <section class="tabs-demo">
    <h2>Horizontal Tabs (Manual Activation)</h2>
    <p>Click tabs or use arrow keys to navigate. Press Space/Enter to activate.</p>

    <ag-tabs activation="manual" active-tab="0" orientation="horizontal">
      <ag-tab slot="tab" panel="panel1">
        <span class="demo-content">
          <Users />
          Team
        </span>
      </ag-tab>
      <ag-tab slot="tab" panel="panel2">
        <span class="demo-content">
          <Settings />
          Settings
        </span>
      </ag-tab>
      <ag-tab slot="tab" panel="panel3">
        <span class="demo-content">
          <HelpCircle />
          Help
        </span>
      </ag-tab>

      <ag-tab-panel slot="panel" id="panel1">
        <div class="demo-content">
          <Users />
          <div>
            <h3>Team Management</h3>
            <p>Manage your team members, assign roles, and track collaboration.</p>
            <p>This panel demonstrates how tab content can contain rich interactive elements while maintaining proper accessibility.</p>
          </div>
        </div>
      </ag-tab-panel>

      <ag-tab-panel slot="panel" id="panel2">
        <div class="demo-content">
          <Settings />
          <div>
            <h3>Application Settings</h3>
            <p>Configure application preferences, notifications, and account settings.</p>
            <p>Focus management ensures that when a tab panel is activated, assistive technologies are properly notified.</p>
          </div>
        </div>
      </ag-tab-panel>

      <ag-tab-panel slot="panel" id="panel3">
        <div class="demo-content">
          <HelpCircle />
          <div>
            <h3>Help & Documentation</h3>
            <p>Find answers to common questions and explore detailed documentation.</p>
            <p>Each tab panel maintains proper ARIA relationships with its corresponding tab.</p>
          </div>
        </div>
      </ag-tab-panel>
    </ag-tabs>
  </section>

  <section class="tabs-demo">
    <h2>Automatic Activation Mode</h2>
    <p>Arrow keys immediately activate tabs (no Space/Enter required).</p>

    <ag-tabs activation="automatic" active-tab="0" orientation="horizontal">
      <ag-tab slot="tab" panel="auto-panel1">Dashboard</ag-tab>
      <ag-tab slot="tab" panel="auto-panel2">Analytics</ag-tab>
      <ag-tab slot="tab" panel="auto-panel3">Reports</ag-tab>

      <ag-tab-panel slot="panel" id="auto-panel1">
        <h3>Dashboard Overview</h3>
        <p>In automatic mode, arrow keys immediately switch between tabs and activate the associated panel.</p>
      </ag-tab-panel>

      <ag-tab-panel slot="panel" id="auto-panel2">
        <h3>Analytics Data</h3>
        <p>This provides a more immediate user experience but may be less suitable for complex interfaces.</p>
      </ag-tab-panel>

      <ag-tab-panel slot="panel" id="auto-panel3">
        <h3>Generated Reports</h3>
        <p>Choose automatic mode when users expect immediate feedback from arrow key navigation.</p>
      </ag-tab-panel>
    </ag-tabs>
  </section>

  <section class="tabs-demo">
    <h2>Vertical Orientation</h2>
    <p>Tabs can be arranged vertically with Up/Down arrow key navigation.</p>

    <ag-tabs activation="manual" active-tab="0" orientation="vertical">
      <ag-tab slot="tab" panel="vert-panel1">Profile</ag-tab>
      <ag-tab slot="tab" panel="vert-panel2">Security</ag-tab>
      <ag-tab slot="tab" panel="vert-panel3">Billing</ag-tab>

      <ag-tab-panel slot="panel" id="vert-panel1">
        <h3>Profile Information</h3>
        <p>Update your personal information, avatar, and display preferences.</p>
        <p>Vertical tabs are useful for sidebar navigation or when horizontal space is limited.</p>
      </ag-tab-panel>

      <ag-tab-panel slot="panel" id="vert-panel2">
        <h3>Security Settings</h3>
        <p>Manage password, two-factor authentication, and login sessions.</p>
        <p>Use Up/Down arrow keys to navigate between tabs in vertical mode.</p>
      </ag-tab-panel>

      <ag-tab-panel slot="panel" id="vert-panel3">
        <h3>Billing & Subscription</h3>
        <p>View payment history, update billing information, and manage subscriptions.</p>
        <p>The same keyboard shortcuts work regardless of orientation.</p>
      </ag-tab-panel>
    </ag-tabs>
  </section>

  <!-- Framework Integration Demos -->
  <section>
    <h2>React Integration</h2>
    <ReactTabsDemo client:only="react" />
  </section>

  <section>
    <h2>Vue Integration</h2>
    <VueTabsDemo client:only="vue" />
  </section>

  <section>
    <h2>Svelte Integration</h2>
    <SvelteTabsDemo client:only="svelte" />
  </section>
</div>

<script>
  // Ensure web components are properly imported
  import 'agnosticui-core';
</script>