---
// Welcome to AgnosticUI v2!
import BaseLayout from "../layouts/BaseLayout.astro";
import {
  ChevronDown,
  Circle,
  FileText,
  Folder,
  BarChart3,
  Square,
  Info,
  Type,
  ArrowRight,
  ToggleLeft,
} from "lucide-astro";
---

<BaseLayout>
  <div>
    <style>
      body {
        margin: 0;
        padding: 0;
      }

      .subtitle {
        color: var(--c-text-light);
        font-size: 1.25rem;
        margin-bottom: 3rem;
      }

      .components-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(270px, 1fr));
        gap: 1.5rem;
        margin-top: 2rem;
      }

      .component-card {
        background: var(--c-card-bg);
        border: 1px solid var(--c-card-border);
        border-radius: 12px;
        padding: 1.5rem;
        text-decoration: none;
        color: inherit;
        transition: all 0.2s ease;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        position: relative;
        z-index: 1;
      }

      .component-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        border-color: var(--ag-primary);
      }

      .component-icon {
        margin-bottom: 1rem;
        color: var(--ag-primary);
      }

      .component-icon svg {
        width: 2rem;
        height: 2rem;
      }

      .component-title {
        font-size: 1.25rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
        color: var(--c-text);
      }

      .component-description {
        color: var(--c-text-light);
        margin-bottom: 1rem;
      }

      .component-features {
        list-style: none;
        padding: 0;
        margin: 0;
      }

      .component-features li {
        padding: 0.25rem 0;
        color: var(--c-text-light);
        font-size: 0.9rem;
      }

      .component-features li:before {
        content: "âœ“";
        color: var(--ag-primary);
        font-weight: bold;
        margin-right: 0.5rem;
      }

      .status-badge {
        display: inline-block;
        padding: 0.25rem 0.75rem;
        border-radius: 9999px;
        font-size: 0.75rem;
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }

      .status-ready {
        background: var(--c-bg-secondary);
        color: var(--ag-primary);
        border: 1px solid var(--ag-primary);
      }

      .status-wip {
        background: var(--c-bg-secondary);
        color: var(--ag-warning);
        border: 1px solid var(--ag-warning);
      }

      .search-container {
        position: sticky;
        top: 0;
        z-index: 10;
        background: var(--c-bg-secondary);
        padding: 1rem 0;
        margin-bottom: 1rem;
      }

      #component-search {
        width: 100%;
        padding: 1rem;
        font-size: 1.125rem;
        border-radius: 12px;
        border: 1px solid var(--c-border);
        background: var(--c-card-bg);
        color: var(--c-text);
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        transition: border-color 0.2s ease, box-shadow 0.2s ease;
      }

      #component-search:focus {
        outline: none;
        border-color: var(--ag-primary);
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
      }

      .getting-started {
        background: var(--c-card-bg);
        border: 2px solid var(--ag-primary);
        border-radius: 12px;
        padding: 2rem;
        margin-bottom: 3rem;

        /* Cover up the Illustrations which has z-index: 0 */
        position: relative;
        z-index: 1;
      }

      .getting-started h2 {
        color: var(--ag-primary);
        margin-top: 0;
      }

      .quick-start {
        background: var(--c-bg-secondary);
        border: 1px solid var(--c-border);
        color: var(--c-text);
        padding: 1rem;
        border-radius: var(--ag-radius-md);
        font-family: "Monaco", "Menlo", monospace;
        font-size: 0.9rem;
        margin: 1rem 0;
      }
    </style>

    <p class="subtitle">
      AI-Ready Component Library - Almost Headless, Framework Agnostic
    </p>

    <div id="search-sentinel"></div>
    <div class="search-container">
      <input
        type="search"
        id="component-search"
        placeholder="Search components..."
        aria-label="Search components"
      />
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // Search filtering
        const searchInput = document.getElementById("component-search");
        const cards = document.querySelectorAll(".component-card");

        if (searchInput) {
          searchInput.addEventListener("input", (e) => {
            const searchTerm = e.target.value.toLowerCase();

            cards.forEach((card) => {
              const title =
                card
                  .querySelector(".component-title")
                  ?.textContent.toLowerCase() || "";
              const description =
                card
                  .querySelector(".component-description")
                  ?.textContent.toLowerCase() || "";

              if (
                title.includes(searchTerm) ||
                description.includes(searchTerm)
              ) {
                card.style.display = "block";
              } else {
                card.style.display = "none";
              }
            });
          });
        }

        // Sticky search observer
        const sentinel = document.getElementById("search-sentinel");
        const themeToggle = document.getElementById("themeToggle");

        if (sentinel && themeToggle) {
          const observer = new IntersectionObserver(
            ([entry]) => {
              themeToggle.style.visibility = entry.isIntersecting
                ? "visible"
                : "hidden";
            },
            { threshold: [0] }
          );

          observer.observe(sentinel);
        }
      });
    </script>

    <div class="components-grid">
      <a href="/accordion" class="component-card">
        <div class="component-icon"><ChevronDown /></div>
        <div class="component-title">Accordion</div>
        <span class="status-badge status-ready">Ready</span>
        <p class="component-description">
          Collapsible content panels with keyboard navigation and ARIA
          compliance.
        </p>
        <ul class="component-features">
          <li>Progressive enhancement</li>
          <li>Keyboard navigation</li>
          <li>React integration</li>
          <li>Almost headless styling</li>
        </ul>
      </a>

      <a href="/tooltip" class="component-card">
        <div class="component-icon"><Info /></div>
        <div class="component-title">Tooltip</div>
        <span class="status-badge status-ready">Ready</span>
        <p class="component-description">
          Contextual information popover with intelligent positioning and accessibility.
        </p>
        <ul class="component-features">
          <li>Hover, focus, and click triggers</li>
          <li>Smart positioning with Floating UI</li>
          <li>Keyboard navigation (Escape)</li>
          <li>APG compliant</li>
        </ul>
      </a>

      <a href="/button" class="component-card">
        <div class="component-icon"><Circle /></div>
        <div class="component-title">Button</div>
        <span class="status-badge status-ready">Ready</span>
        <p class="component-description">
          Versatile button component with APG compliance and toggle functionality.
        </p>
        <ul class="component-features">
          <li>Multiple types (button, submit, reset)</li>
          <li>Loading and disabled states</li>
          <li>Toggle functionality</li>
          <li>APG compliant</li>
        </ul>
      </a>

      <a href="/icon-button" class="component-card">
        <div class="component-icon"><Square /></div>
        <div class="component-title">IconButton</div>
        <span class="status-badge status-ready">Ready</span>
        <p class="component-description">
          Accessible icon button component for actions with symbol or SVG icons.
        </p>
        <ul class="component-features">
          <li>Unicode symbols & SVG icons</li>
          <li>Multiple variants & sizes</li>
          <li>Toggle functionality</li>
          <li>Sara Soueidan accessibility standards</li>
        </ul>
      </a>

      <a href="/input" class="component-card">
        <div class="component-icon"><Type /></div>
        <div class="component-title">Input</div>
        <span class="status-badge status-ready">Ready</span>
        <p class="component-description">
          Comprehensive input component with flexible label architecture and BBC GEL compliance.
        </p>
        <ul class="component-features">
          <li>Complete label architecture (4 patterns)</li>
          <li>HTML5 input types + textarea</li>
          <li>Validation & error handling</li>
          <li>Size variants & addon support</li>
        </ul>
      </a>

      <div class="component-card" style="opacity: 0.75; cursor: not-allowed;">
        <div class="component-icon"><FileText /></div>
        <div class="component-title">Form</div>
        <span class="status-badge status-wip">Coming Soon</span>
        <p class="component-description">
          Complete form system with validation and accessibility.
        </p>
        <ul class="component-features">
          <li>Built-in validation</li>
          <li>Error handling</li>
          <li>Multiple input types</li>
          <li>Schema support</li>
        </ul>
      </div>

      <a href="/tabs" class="component-card">
        <div class="component-icon"><Folder /></div>
        <div class="component-title">Tabs</div>
        <span class="status-badge status-ready">Ready</span>
        <p class="component-description">
          Tab interface for organizing content into panels.
        </p>
        <ul class="component-features">
          <li>Keyboard navigation</li>
          <li>Dynamic tabs</li>
          <li>Vertical orientation</li>
          <li>Router integration</li>
        </ul>
      </a>

      <div class="component-card" style="opacity: 0.75; cursor: not-allowed;">
        <div class="component-icon"><BarChart3 /></div>
        <div class="component-title">Table</div>
        <span class="status-badge status-wip">Coming Soon</span>
        <p class="component-description">
          Data table with sorting, filtering, and pagination.
        </p>
        <ul class="component-features">
          <li>Sorting & filtering</li>
          <li>Pagination</li>
          <li>Row selection</li>
          <li>Responsive design</li>
        </ul>
      </div>

      <a href="/dialog" class="component-card">
        <div class="component-icon"><Square /></div>
        <div class="component-title">Dialog</div>
        <span class="status-badge status-ready">Ready</span>
        <p class="component-description">
          Modal dialog component with comprehensive accessibility features and focus trapping.
        </p>
        <ul class="component-features">
          <li>Focus trapping (Tab/Shift+Tab)</li>
          <li>Keyboard navigation (Escape)</li>
          <li>Backdrop & close button handling</li>
          <li>WAI-ARIA APG compliant</li>
        </ul>
      </a>

      <a href="/breadcrumb" class="component-card">
        <div class="component-icon"><ArrowRight /></div>
        <div class="component-title">Breadcrumb</div>
        <span class="status-badge status-ready">Ready</span>
        <p class="component-description">
          Navigation breadcrumb component implementing WAI-ARIA Breadcrumb pattern with multiple separator styles.
        </p>
        <ul class="component-features">
          <li>WAI-ARIA compliant navigation</li>
          <li>Multiple separator styles</li>
          <li>Current page indication</li>
          <li>Click event handling</li>
        </ul>
      </a>

      <a href="/toggle" class="component-card">
        <div class="component-icon"><ToggleLeft /></div>
        <div class="component-title">Toggle</div>
        <span class="status-badge status-ready">Ready</span>
        <p class="component-description">
          Toggle switch component for binary state changes with WAI-ARIA Switch pattern compliance.
        </p>
        <ul class="component-features">
          <li>Binary state switching</li>
          <li>Size variants (sm, md, lg)</li>
          <li>Visual variants with semantic colors</li>
          <li>Keyboard navigation (Space key)</li>
        </ul>
      </a>
    </div>
  </div>
</BaseLayout>
